{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "../src/pages/Shelf.html",
    "../src/components/ShelfList.html",
    "../src/components/ShelfContent.html",
    "../src/pages/Item.html",
    "../src/components/ItemInfo.html",
    "../src/components/ItemContent.html"
  ],
  "sourcesContent": [
    "<div class=\"container\">\n  <div class=\"shelf-list\"><ShelfList shelves=\"{{ shelves }}\" :locationMap /></div>\n  {{#if path.shelfId}}\n    Shelf: {{path.shelfId}}\n    <div class=\"shelf-content\"><ShelfContent :shelf :locationMap /></div>\n  {{/if}}\n</div>\n\n<script>\n  import SvelteRouter from 'svelte-router'\n  import ShelfList from '../components/ShelfList.html'\n  import ShelfContent from '../components/ShelfContent.html'\n  const { createRouter } = SvelteRouter\n  export default {\n    data: () => ({\n      shelves: {},\n      shelf: {},\n      locationMap: null\n    }),\n    components: {\n      ShelfList,\n      ShelfContent\n    },\n    oncreate () {\n      // get shelves from api\n      const api = \"http://spore.deichman.no/api\"\n      fetch(`${api}/shelves`)\n      .then(res  => { return res.json() })\n      .then(json => {\n        return new Promise((resolve) => {\n          let m = new Map\n          for (const shelf of json.results) {\n            let l = new Set\n            let locs = shelf.loc.split('.')\n            for (let i=0;i < locs.length;i++) {\n              l.add({\n                link: `${locs.slice(0,i+1).join('.')}`,\n                name: locs[i]\n              })\n            }\n            m.set(shelf.loc, l)\n          }\n          resolve(this.set({\n            locationMap: m,\n            shelves: json\n          }))\n        })\n      })\n      .then(() => {\n        const path = this.get(\"path\")\n        if (path.shelfId) {\n          // get shelvf from path route\n          return Promise.resolve(fetch(`${api}/shelf/${path.shelfId}`))\n        } else {\n          return Promise.reject(\"No shelf id\")\n        }\n      })\n      .then(res  => { return res.json() })\n      .then(json => {\n        return this.set({shelf: json})\n      })\n      .catch(err => {\n        console.log(`something broke: ${err}`)\n      })\n    }\n  }\n</script>\n<style type=\"text/css\">\n  .container{\n    width: 100%;\n  }\n\n  .shelf-list {\n    float: left;\n    width: 20%;\n  }\n  .shelf-content {\n    float: right;\n    width: 80%;\n  }\n</style>",
    "<div>\n  <table border=1 cellspacing=0 cellpadding=3 style=\"max-width: 250px;\">\n    <thead>\n      <tr><th>shelf</th><th>items</th><tr>\n    </thead>\n    <tbody>\n      {{#if shelves.results}}\n        {{#each shelves.results as res}}\n          <tr>\n            <td>\n              {{#each [...locationMap.get(res.loc)] as loc, idx}}\n                <div class=\"shelflink\">\n                  <a href=\"/#/shelf/{{loc.link}}\">{{loc.name}}</a>{{#if (idx != [...locationMap.get(res.loc)].length - 1) }}.{{/if}}\n                </div>\n              {{/each}}\n            </td>\n            <td>{{res.tags}}</td>\n          </tr>\n        {{/each}}\n      {{/if}}\n    </tbody>\n  </table>\n</div>\n<script>\n  import SvelteRouter from 'svelte-router'\n  export default {\n    props: ['shelves']\n  }\n</script>\n<style>\n  a {\n      text-decoration: none;\n      color: #840;\n  }\n  .shelflink {\n      display: inline-block;\n      white-space: nowrap;\n  }\n  .shelflink div {\n      display: inline-block;\n  }\n  .shelflink div:hover > a {\n      background-color: #fa5;\n      color: black;\n  }\n  a:hover {\n      background-color: #fa5;\n      color: black;\n  }\n  td {\n      padding: 2px;\n      padding-left: 5px;\n      padding-right: 3px;\n      border-top: none;\n      border-left: none;\n      white-space: nowrap;\n      font-size: 11px;\n  }\n  th {\n      background-color: #ccc;\n      border-top: none;\n      border-left: none;\n      font-size: 12px;\n  }\n</style>",
    "<div>\n  <table border=1 cellspacing=0 cellpadding=3>\n    <thead>\n      <tr><th>at</th><th>location</th><th>barcode</th><th>callnum</th><th width=\"15%\">author</th><th>title</th><th>last</th></tr>\n    </thead>\n    <tbody>\n      {{#if shelf.results}}\n        {{#each shelf.results as res}}\n          <tr>\n            <td style=\"background-color: #a9fbaf;\">\n              <abbr title=\"{{res.last_at.iso8601}}\">{{res.last_at.ago}} ago</abbr>\n            </td>\n            <td>\n              {{#each [...locationMap.get(res.tags[0].temporary.loc)] as loc, idx}}\n                  <div class=\"shelflink\">\n                    <a href=\"/#/shelf/{{loc.link}}\">{{loc.name}}</a>{{#if (idx != [...locationMap.get(res.tags[0].temporary.loc)].length - 1) }}.{{/if}}\n                  </div>\n              {{/each}}\n            </td>\n            <td><a href=\"/#/item/{{res.item_id}}\">{{res.item_id}}</a></td>\n            <td><abbr title=\"{{res.data.callnumber}}\">{{res.data.callnumber}}</abbr></td>\n            <td><abbr style=\"text-decoration:&nbsp;none;\" title=\"{{res.data.author}}\">{{res.data.author}}</abbr></td>\n            <td>{{res.data.title}}</td>\n            <td><abbr title=\"{{res.last_at.iso8601}}\">{{res.last_at.ago}}</abbr></td>\n          </tr>\n        {{/each}}\n      {{/if}}\n  </table>\n</div>\n<style>\n  .shelflink {\n    display: inline-block;\n    white-space: nowrap;\n  }\n  .shelflink div {\n    display: inline-block;\n  }\n  .shelflink div:hover > a {\n    background-color: #fa5;\n    color: black;\n  }\n  a:hover {\n    background-color: #fa5;\n    color: black;\n  }\n  td {\n    padding: 2px;\n    padding-left: 5px;\n    padding-right: 3px;\n    border-top: none;\n    border-left: none;\n    white-space: nowrap;\n    font-size: 11px;\n  }\n  th {\n    background-color: #ccc;\n    border-top: none;\n    border-left: none;\n    font-size: 12px;\n  }\n</style>",
    "<div class=\"container\">\n  <div class=\"item-info\">\n    <ItemInfo :item :locationMap />\n  </div>\n  <div class=\"history\">\n    <ItemContent barcode=\"{{path.barcode}}\" :item :locationMap />\n  </div>\n</div>\n\n<script>\n  import SvelteRouter from 'svelte-router'\n  import ItemInfo from '../components/ItemInfo.html'\n  import ItemContent from '../components/ItemContent.html'\n  const { createRouter } = SvelteRouter\n  export default {\n    data: () => ({\n      item: null,\n      locationMap: null\n    }),\n    methods: {\n      goHome () {\n        createRouter.replace('/')\n      }\n    },\n    oncreate() {\n      // get shelves from api\n      const api = \"http://spore.deichman.no/api\"\n      fetch(`${api}/shelves`)\n      .then(res  => { return res.json() })\n      .then(json => {\n        return new Promise((resolve) => {\n          let m = new Map\n          for (const shelf of json.results) {\n            let l = new Set\n            let locs = shelf.loc.split('.')\n            for (let i=0;i < locs.length;i++) {\n              l.add({\n                link: `${locs.slice(0,i+1).join('.')}`,\n                name: locs[i]\n              })\n            }\n            m.set(shelf.loc, l)\n          }\n          resolve(this.set({\n            locationMap: m\n          }))\n        })\n      })\n      // get barcode from path route\n      .then(() => {\n        const path = this.get(\"path\")\n        const productId = \"NO:02030000\"\n        if (path.barcode) {\n          return Promise.resolve(fetch(`${api}/item/${productId}/${path.barcode}`))\n        } else {\n          return Promise.reject(\"No shelf id\")\n        }\n      })\n      .then(res  => { return res.json() })\n      .then(json => {\n        console.log(json)\n        return this.set({item: json})\n      })\n      .catch(err => {\n        console.log(`something broke: ${err}`)\n      })\n    },\n    components: {\n      ItemContent,\n      ItemInfo\n    }\n  }\n</script>\n<style type=\"text/css\">\n  .container{\n    width: 100%;\n  }\n\n  .item-info {\n    float: left;\n    width: 20%;\n  }\n  .history {\n    float: right;\n    width: 80%;\n  }\n</style>",
    "<div>\n  <!--<img src=\"https://static.deichman.no/thumb/p54427b83336da5e04f48570efe6599d6.jpg\">-->\n  {{#if item && locationMap}}\n  <table border=1 cellspacing=0 cellpadding=3 style=\"max-width: 250px; \">\n    <tr><th colspan=2>{{ item.response.meta.title }}</th></tr>\n    <tr><td>author</td><td>{{ item.response.meta.author }}</td></tr>\n    <tr><td>cn</td><td><abbr title=\"{{ item.response.meta.callnumber }}\">{{ item.response.meta.callnumber }}</abbr></td></tr>\n    <tr><td>barcode</td><td><a href=\"/#/item/{{ item.item_id }}\">{{ item.item_id }}</a></td></tr>\n    <tr><td>bibnum</td><td>{{ item.response.meta.biblionumber }} [<a href=\"https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber={{ item.response.meta.biblionumber }}\">Koha</a>]</td></tr>\n    <tr><td>pubid</td><td>notgiveninapi</td></tr>\n    <!-- TODO, dont render until locationMap is set -->\n      {{#each item.response.tags as tag}}\n        <tr><th colspan=2>tag</th></tr>\n        <tr>\n          <td>last_at</td>\n          {{#if tag.permanent.at }}\n            <td style=\"background: #99fec8; \"><abbr title=\"Tue Feb 27 10:16:09 2018\">CHECK {{ tag.permanent.at.iso8601 }}</abbr></td>\n          {{/if}}\n        </tr>\n        <tr><td>last_dev</td><td>hutl.rfidhub.10.172.3.70</td></tr>\n        <tr><td>rfid</td><td><a href=\"/#/dev/{{ tag.permanent.dev }}\">CHECK {{ tag.permanent.dev }}</a></td></tr>\n        <tr>\n          <td>shelf</td>\n          <td>\n            <!-- tag.permanent.loc -->\n            {{#if tag.permanent.loc}}\n              {{#each [...locationMap.get(tag.permanent.loc)] as loc, idx}}\n                    <div class=\"shelflink\">\n                      <a href=\"/#/shelf/{{loc.link}}\">{{loc.name}}</a>{{#if (idx != [...locationMap.get(tag.permanent.loc)].length - 1) }}.{{/if}}\n                    </div>\n              {{/each}}\n            {{/if}}\n          </td>\n        </tr>\n        <tr><td>shelf_at</td><td style=\"background: #f4a53f; \"><abbr title=\"Tue Jul 18 12:58:05 2017\">2017-07-18</abbr></td></tr>\n        <tr><td>shelf_dev</td><td><span class=\"hex\">NULL</span></td></tr>\n        <tr>\n          <td>temp</td>\n          <td>\n            <!-- tag.temporary.loc -->\n            {{#if tag.temporary.loc}}\n              {{#each [...locationMap.get(tag.temporary.loc)] as loc, idx}}\n                    <div class=\"shelflink\">\n                      <a href=\"/#/shelf/{{loc.link}}\">{{loc.name}}</a>{{#if (idx != [...locationMap.get(tag.temporary.loc)].length - 1) }}.{{/if}}\n                    </div>\n              {{/each}}\n            {{/if}}\n        </tr>\n        <tr><td>temp_at</td><td style=\"background: #99fec8; \"><abbr title=\"Tue Feb 27 10:16:09 2018\">CHECK {{ tag.temporary.at.iso8601 }}</abbr></td></tr>\n      {{/each}}\n    </table>\n  {{/if}}\n</div>\n<script>\n  import SvelteRouter from 'svelte-router'\n  export default {\n    props: [\"locationMap\", \"item\"]\n  }\n</script>\n<style>\n  td {\n      padding: 2px;\n      padding-left: 5px;\n      padding-right: 3px;\n      border-top: none;\n      border-left: none;\n      white-space: nowrap;\n      font-size: 11px;\n  }\n  th {\n      background-color: #ccc;\n      border-top: none;\n      border-left: none;\n      font-size: 12px;\n  }\n  tr {\n  }\n  tr.hit {\n      background-color: #fbb;\n  }\n  .hex {\n      font-size: 60%;\n      border: 1px solid gray;\n      margin-right: 1px;\n      background-color: gray;\n      color: white;\n  }\n  .hex-utf {\n      background-color: #ddd;\n  }\n</style>\n",
    "<div>\n  {{#if item}}\n    <h1>-- {{ barcode }} {{ item.response.meta.title }}</h1>\n    <form on:submit='handleSubmit( event )'>\n    <label for=\"code\">Barcode: </label>\n    <input id=\"code\" name=\"code\" class=\"ui-autocomplete-input\" autocomplete=\"off\">\n    </form>\n    <hr size=\"1\">\n    <h2>transaction log</h2>\n    <span>Barcode: {{ barcode }}</span><br>\n    <span>Author: {{ item.response.meta.author }}</span><br>\n\n    <table border=1 cellspacing=0 cellpadding=3 style=\"max-width: 250px; \">\n      <thead>\n        <tr><th>at</th><th>shelf</th><th>type</th><th>rfid</th></tr>\n      </thead>\n      <tbody>\n        {{#each item.response.history as it}}\n          <tr><td>{{it.at.ago}} ago</td>\n            <td>\n              {{#each [...locationMap.get(it.location)] as loc, idx}}\n                <div class=\"shelflink\">\n                  <a href=\"/#/shelf/{{loc.link}}\">{{loc.name}}</a>{{#if (idx != [...locationMap.get(it.location)].length - 1) }}.{{/if}}\n                </div>\n              {{/each}}\n            </td>\n            <td>{{it.actions.join(' ')}}</td><td>{{it.dev}}</td></tr>\n        {{/each}}\n      </tbody>\n    </table>\n  {{/if}}\n</div>\n<script>\n  import SvelteRouter from 'svelte-router'\n  export default {\n    props: [\"barcode\", \"item\"],\n    methods: {\n      handleSubmit(event) {\n        event.preventDefault()\n        // no action here yet\n        console.log(event)\n      }\n    }\n  }\n</script>\n<style>\n  .shelflink {\n    display: inline-block;\n    white-space: nowrap;\n  }\n  a:hover {\n    background-color: #fa5;\n    color: black;\n  }\n  td {\n    padding: 2px;\n    padding-left: 5px;\n    padding-right: 3px;\n    border-top: none;\n    border-left: none;\n    white-space: nowrap;\n    font-size: 11px;\n  }\n  th {\n    background-color: #ccc;\n    border-top: none;\n    border-left: none;\n    font-size: 12px;\n  }\n</style>\n"
  ],
  "names": [],
  "mappings": "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"
}