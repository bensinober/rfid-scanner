var app=function(){"use strict";function t(){}function n(t){for(var n,e,o=1,a=arguments.length;o<a;o++)for(n in e=arguments[o])t[n]=e[n];return t}function e(t,n){n.appendChild(t)}function o(t,n,e){n.insertBefore(t,e)}function a(t){t.parentNode.removeChild(t)}function i(t){for(var n=0;n<t.length;n+=1)t[n]&&t[n].d()}function r(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function s(){return document.createComment("")}function l(t,n,e){t.addEventListener(n,e,!1)}function u(t,n,e){t.removeEventListener(n,e,!1)}function h(t,n,e){t.setAttribute(n,e)}function f(t,n,e){t.style.setProperty(n,e)}function d(){return Object.create(null)}function p(n){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==n&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function m(t,n,e,o,a){for(var i in n)if(e[i]){var r=o[i],c=a[i],s=n[i];if(s)for(var l=0;l<s.length;l+=1){var u=s[l];u.__calling||(u.__calling=!0,u.call(t,r,c),u.__calling=!1)}}}function v(t,n){t._observers={pre:d(),post:d()},t._handlers=d(),t._bind=n._bind,t.options=n,t.root=n.root||t,t.store=t.root.store||n.store}function g(t){for(;t&&t.length;)t.shift()()}var _={destroy:p,get:function(t){return t?this._state[t]:this._state},fire:function(t,n){var e=t in this._handlers&&this._handlers[t].slice();if(e)for(var o=0;o<e.length;o+=1)e[o].call(this,n)},observe:function(t,n,e){var o=e&&e.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(n),e&&!1===e.init||(n.__calling=!0,n.call(this,this._state[t]),n.__calling=!1),{cancel:function(){var e=o[t].indexOf(n);~e&&o[t].splice(e,1)}}},on:function(t,n){if("teardown"===t)return this.on("destroy",n);var e=this._handlers[t]||(this._handlers[t]=[]);return e.push(n),{cancel:function(){var t=e.indexOf(n);~t&&e.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,g(this.root._beforecreate),g(this.root._oncreate),g(this.root._aftercreate),this.root._lock=!1)},teardown:p,_recompute:t,_set:function(t){var e=this._state,o={},a=!1;for(var i in t)this._differs(t[i],e[i])&&(o[i]=a=!0);a&&(this._state=n({},e,t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(m(this,this._observers.pre,o,this._state,e),this._fragment.p(o,this._state),m(this,this._observers.post,o,this._state,e)))},_mount:function(t,n){this._fragment.m(t,n)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var b,x,y=(function(t,n){t.exports=function(){function t(){}function n(t){for(var n,e,o=1,a=arguments.length;o<a;o++)for(n in e=arguments[o])t[n]=e[n];return t}function e(){return Object.create(null)}function o(n){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==n&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function a(t,n,e,o,a){for(var i in n)if(e[i]){var r=o[i],c=a[i],s=n[i];if(s)for(var l=0;l<s.length;l+=1){var u=s[l];u.__calling||(u.__calling=!0,u.call(t,r,c),u.__calling=!1)}}}function i(t){for(;t&&t.length;)t.shift()()}var r={destroy:o,get:function(t){return t?this._state[t]:this._state},fire:function(t,n){var e=t in this._handlers&&this._handlers[t].slice();if(e)for(var o=0;o<e.length;o+=1)e[o].call(this,n)},observe:function(t,n,e){var o=e&&e.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(n),e&&!1===e.init||(n.__calling=!0,n.call(this,this._state[t]),n.__calling=!1),{cancel:function(){var e=o[t].indexOf(n);~e&&o[t].splice(e,1)}}},on:function(t,n){if("teardown"===t)return this.on("destroy",n);var e=this._handlers[t]||(this._handlers[t]=[]);return e.push(n),{cancel:function(){var t=e.indexOf(n);~t&&e.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,i(this.root._beforecreate),i(this.root._oncreate),i(this.root._aftercreate),this.root._lock=!1)},teardown:o,_recompute:t,_set:function(t){var e=this._state,o={},i=!1;for(var r in t)this._differs(t[r],e[r])&&(o[r]=i=!0);i&&(this._state=n({},e,t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(a(this,this._observers.pre,o,this._state,e),this._fragment.p(o,this._state),a(this,this._observers.post,o,this._state,e)))},_mount:function(t,n){this._fragment.m(t,n)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}};function c(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t,n){return t(n={exports:{}},n.exports),n.exports}var l=function(t,n,e){var o=arguments.length;e=new Array(o>2?o-2:0);for(var a=2;a<o;a++)e[a-2]=arguments[a];if(void 0===n)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(n.length<10||/^[s\W]*$/.test(n))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+n);if(!t){var i=0,r="Warning: "+n.replace(/%s/g,function(){return e[i++]});"undefined"!=typeof console&&console.error(r);try{throw new Error(r)}catch(t){}}},u=function(t,n,e,o,a,i,r,c){if(void 0===n)throw new Error("invariant requires an error message argument");if(!t){var s;if(void 0===n)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[e,o,a,i,r,c],u=0;(s=new Error(n.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw s.framesToPop=1,s}};function h(t){return"/"===t.charAt(0)}function f(t,n){for(var e=n,o=e+1,a=t.length;o<a;e+=1,o+=1)t[e]=t[o];t.pop()}function d(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=t&&t.split("/")||[],o=n&&n.split("/")||[],a=t&&h(t),i=n&&h(n),r=a||i;if(t&&h(t)?o=e:e.length&&(o.pop(),o=o.concat(e)),!o.length)return"/";var c=void 0;if(o.length){var s=o[o.length-1];c="."===s||".."===s||""===s}else c=!1;for(var l=0,u=o.length;u>=0;u--){var d=o[u];"."===d?f(o,u):".."===d?(f(o,u),l++):l&&(f(o,u),l--)}if(!r)for(;l--;l)o.unshift("..");!r||""===o[0]||o[0]&&h(o[0])||o.unshift("");var p=o.join("/");return c&&"/"!==p.substr(-1)&&(p+="/"),p}var p=Object.freeze({default:d}),m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function v(t,n){if(t===n)return!0;if(null==t||null==n)return!1;if(Array.isArray(t))return Array.isArray(n)&&t.length===n.length&&t.every(function(t,e){return v(t,n[e])});var e=void 0===t?"undefined":m(t);if(e!==(void 0===n?"undefined":m(n)))return!1;if("object"===e){var o=t.valueOf(),a=n.valueOf();if(o!==t||a!==n)return v(o,a);var i=Object.keys(t),r=Object.keys(n);return i.length===r.length&&i.every(function(e){return v(t[e],n[e])})}return!1}var g=Object.freeze({default:v}),_=s(function(t,n){n.__esModule=!0,n.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},n.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t};var e=n.hasBasename=function(t,n){return new RegExp("^"+n+"(\\/|\\?|#|$)","i").test(t)};n.stripBasename=function(t,n){return e(t,n)?t.substr(n.length):t},n.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},n.parsePath=function(t){var n=t||"/",e="",o="",a=n.indexOf("#");-1!==a&&(o=n.substr(a),n=n.substr(0,a));var i=n.indexOf("?");return-1!==i&&(e=n.substr(i),n=n.substr(0,i)),{pathname:n,search:"?"===e?"":e,hash:"#"===o?"":o}},n.createPath=function(t){var n=t.pathname,e=t.search,o=t.hash,a=n||"/";return e&&"?"!==e&&(a+="?"===e.charAt(0)?e:"?"+e),o&&"#"!==o&&(a+="#"===o.charAt(0)?o:"#"+o),a}});c(_),_.addLeadingSlash,_.stripLeadingSlash,_.hasBasename,_.stripBasename,_.stripTrailingSlash,_.parsePath,_.createPath;var b=p&&d||p,x=g&&v||g,y=s(function(t,n){n.__esModule=!0,n.locationsAreEqual=n.createLocation=void 0;var e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o=i(b),a=i(x);function i(t){return t&&t.__esModule?t:{default:t}}n.createLocation=function(t,n,a,i){var r=void 0;"string"==typeof t?(r=(0,_.parsePath)(t)).state=n:(void 0===(r=e({},t)).pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="",void 0!==n&&void 0===r.state&&(r.state=n));try{r.pathname=decodeURI(r.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return a&&(r.key=a),i?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=(0,o.default)(r.pathname,i.pathname)):r.pathname=i.pathname:r.pathname||(r.pathname="/"),r},n.locationsAreEqual=function(t,n){return t.pathname===n.pathname&&t.search===n.search&&t.hash===n.hash&&t.key===n.key&&(0,a.default)(t.state,n.state)}});c(y),y.locationsAreEqual,y.createLocation;var w=s(function(t,n){n.__esModule=!0;var e,o=(e=l)&&e.__esModule?e:{default:e};n.default=function(){var t=null,n=[];return{setPrompt:function(n){return(0,o.default)(null==t,"A history supports only one prompt at a time"),t=n,function(){t===n&&(t=null)}},confirmTransitionTo:function(n,e,a,i){if(null!=t){var r="function"==typeof t?t(n,e):t;"string"==typeof r?"function"==typeof a?a(r,i):((0,o.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==r)}else i(!0)},appendListener:function(t){var e=!0,o=function(){e&&t.apply(void 0,arguments)};return n.push(o),function(){e=!1,n=n.filter(function(t){return t!==o})}},notifyListeners:function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];n.forEach(function(t){return t.apply(void 0,e)})}}}});c(w);var M=s(function(t,n){n.__esModule=!0,n.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),n.addEventListener=function(t,n,e){return t.addEventListener?t.addEventListener(n,e,!1):t.attachEvent("on"+n,e)},n.removeEventListener=function(t,n,e){return t.removeEventListener?t.removeEventListener(n,e,!1):t.detachEvent("on"+n,e)},n.getConfirmation=function(t,n){return n(window.confirm(t))},n.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},n.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},n.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},n.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}});c(M),M.canUseDOM,M.addEventListener,M.removeEventListener,M.getConfirmation,M.supportsHistory,M.supportsPopStateOnHashChange,M.supportsGoWithoutReloadUsingHash,M.isExtraneousPopstateEvent;var P=c(s(function(t,n){n.__esModule=!0;var e=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},o=r(l),a=r(u),i=r(w);function r(t){return t&&t.__esModule?t:{default:t}}var c={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,_.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:_.stripLeadingSlash,decodePath:_.addLeadingSlash},slash:{encodePath:_.addLeadingSlash,decodePath:_.addLeadingSlash}},s=function(){var t=window.location.href,n=t.indexOf("#");return-1===n?"":t.substring(n+1)},h=function(t){var n=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,n>=0?n:0)+"#"+t)};n.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(M.canUseDOM,"Hash history needs a DOM");var n=window.history,r=(0,M.supportsGoWithoutReloadUsingHash)(),l=t.getUserConfirmation,u=void 0===l?M.getConfirmation:l,f=t.hashType,d=void 0===f?"slash":f,p=t.basename?(0,_.stripTrailingSlash)((0,_.addLeadingSlash)(t.basename)):"",m=c[d],v=m.encodePath,g=m.decodePath,b=function(){var t=g(s());return(0,o.default)(!p||(0,_.hasBasename)(t,p),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+p+'".'),p&&(t=(0,_.stripBasename)(t,p)),(0,y.createLocation)(t)},x=(0,i.default)(),w=function(t){e(U,t),U.length=n.length,x.notifyListeners(U.location,U.action)},P=!1,O=null,k=function(){var t=s(),n=v(t);if(t!==n)h(n);else{var e=b(),o=U.location;if(!P&&(0,y.locationsAreEqual)(o,e))return;if(O===(0,_.createPath)(e))return;O=null,E(e)}},E=function(t){P?(P=!1,w()):x.confirmTransitionTo(t,"POP",u,function(n){n?w({action:"POP",location:t}):L(t)})},L=function(t){var n=U.location,e=H.lastIndexOf((0,_.createPath)(n));-1===e&&(e=0);var o=H.lastIndexOf((0,_.createPath)(t));-1===o&&(o=0);var a=e-o;a&&(P=!0,j(a))},C=s(),A=v(C);C!==A&&h(A);var S=b(),H=[(0,_.createPath)(S)],j=function(t){(0,o.default)(r,"Hash history go(n) causes a full page reload in this browser"),n.go(t)},T=0,R=function(t){1===(T+=t)?(0,M.addEventListener)(window,"hashchange",k):0===T&&(0,M.removeEventListener)(window,"hashchange",k)},N=!1,U={length:n.length,action:"POP",location:S,createHref:function(t){return"#"+v(p+(0,_.createPath)(t))},push:function(t,n){(0,o.default)(void 0===n,"Hash history cannot push state; it is ignored");var e=(0,y.createLocation)(t,void 0,void 0,U.location);x.confirmTransitionTo(e,"PUSH",u,function(t){if(t){var n=(0,_.createPath)(e),a=v(p+n);if(s()!==a){O=n,function(t){window.location.hash=t}(a);var i=H.lastIndexOf((0,_.createPath)(U.location)),r=H.slice(0,-1===i?0:i+1);r.push(n),H=r,w({action:"PUSH",location:e})}else(0,o.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),w()}})},replace:function(t,n){(0,o.default)(void 0===n,"Hash history cannot replace state; it is ignored");var e=(0,y.createLocation)(t,void 0,void 0,U.location);x.confirmTransitionTo(e,"REPLACE",u,function(t){if(t){var n=(0,_.createPath)(e),o=v(p+n);s()!==o&&(O=n,h(o));var a=H.indexOf((0,_.createPath)(U.location));-1!==a&&(H[a]=n),w({action:"REPLACE",location:e})}})},go:j,goBack:function(){return j(-1)},goForward:function(){return j(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=x.setPrompt(t);return N||(R(1),N=!0),function(){return N&&(N=!1,R(-1)),n()}},listen:function(t){var n=x.appendListener(t);return R(1),function(){R(-1),n()}}};return U}}))(),O="router-link-active",k={navigate:function(t,n){t&&t.preventDefault&&t.preventDefault(),n&&P.location.pathname!==n&&(this.get("replace")?P.replace(n):P.push(n))},setActivedClass:function(t){var n=t.pathname===this.get("to");this.set({active:n})}};function E(){this.get("event")()}function L(t){!function(t,n){t._observers={pre:e(),post:e()},t._handlers=e(),t._bind=n._bind,t.options=n,t.root=n.root||t,t.store=t.root.store||n.store}(this,t),this._state=n({replace:!1,to:"/",basePath:"#",active:!1,class:"",activeClass:O,event:null},t.data),this._handlers.destroy=[E],this._slotted=t.slots||{};var o=function(){this.setActivedClass(P.location),this.set({event:P.listen(this.setActivedClass.bind(this))})}.bind(this);t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,n){var e,o,a,i=t._slotted.default;function r(n){var e=t.get();t.navigate(n,e.to)}return{c:function(){e=document.createElement("a"),this.h()},h:function(){var t,i;e.href=o=""+n.basePath+n.to,e.className=a=n.class+" "+(n.active?n.activeClass:""),t="click",i=r,e.addEventListener(t,i,!1)},m:function(t,n){!function(t,n,e){n.insertBefore(t,e)}(e,t,n),i&&function(t,n){n.appendChild(t)}(i,e)},p:function(t,n){(t.basePath||t.to)&&o!==(o=""+n.basePath+n.to)&&(e.href=o),(t.class||t.active||t.activeClass)&&a!==(a=n.class+" "+(n.active?n.activeClass:""))&&(e.className=a)},u:function(){var t;(t=e).parentNode.removeChild(t),i&&function(t,n){for(;t.firstChild;)n.appendChild(t.firstChild)}(e,i)},d:function(){var t,n;t="click",n=r,e.removeEventListener(t,n,!1)}}}(this,this._state),this.root._oncreate.push(o),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),i(this._oncreate))}n(L.prototype,k,r);var C=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},A=function(t,n){return t.map(function(t){return null!==t.match(new RegExp(":"+n))?"("+n+")":t}).join("\\/")},S=function(t,n,e){var o={};return t.filter(function(t){return null!==t.match(new RegExp(":"+e))}).map(function(t){return t.match(new RegExp(":("+e+")"))[1]}).forEach(function(t,e){var a=e+1;o[t]=n[a]}),o},H=function(t,n,e,o){var a=t[n],i=a.Component,r=a.props;i||(i=t[n]);var c={data:{path:o}};return r=r||{},Object.prototype.hasOwnProperty.call(r,"data")&&(r.data.path=o,c={}),new i(C({target:e},r,c))},j=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=void 0,o=void 0,a=void 0,i=n.pathRegex?n.pathRegex:"[a-zA-Z0-9]+",r=n.defaultRoute?n.defaultRoute:"default",c=function(n){var o=!1;for(var c in a&&a.destroy(),t)if(Object.prototype.hasOwnProperty.call(t,c)){var s=c.split("/"),l=A(s,i),u=n.pathname.match(new RegExp("^"+l+"$"));if(null!==u){var h=S(s,u,i);a=H(t,c,e,h),o=!0;break}}!o&&t[r]&&(a=H(t,r,e,{}))};return{create:function(t){e="string"==typeof t?document.querySelector(t):t,o=P.listen(c),c(P.location)},destroy:function(){o&&(o(),o=void 0)}}};return j.push=function(t){P.push(t)},j.replace=function(t){P.replace(t)},j.go=function(t){P.go(t)},j.listen=function(t){P.listen(t)},{createRouter:j,RouterLink:L}}()}(b={exports:{}},b.exports),b.exports),w=(x=y)&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x;function M(t){h(t,"svelte-2888509505","")}function P(t,s){for(var l,u,h,f,d,p=s.res,m=(s.res_index,p.tags),v=[].concat(s.locationMap.get(p.loc)),g=[],_=0;_<v.length;_+=1)g[_]=O(t,n({},s,{loc:v[_],idx:_}));return{c:function(){l=r("tr"),u=r("td");for(var t=0;t<g.length;t+=1)g[t].c();h=c("\n            "),f=r("td"),d=c(m),this.h()},h:function(){M(u),M(f)},m:function(t,n){o(l,t,n),e(u,l);for(var a=0;a<g.length;a+=1)g[a].m(u,null);e(h,l),e(f,l),e(d,f)},p:function(e,o){p=o.res,o.res_index;var a=[].concat(o.locationMap.get(p.loc));if(e.locationMap||e.shelves){for(var i=0;i<a.length;i+=1){var r=n({},o,{loc:a[i],idx:i});g[i]?g[i].p(e,r):(g[i]=O(t,r),g[i].c(),g[i].m(u,null))}for(;i<g.length;i+=1)g[i].u(),g[i].d();g.length=a.length}e.shelves&&m!==(m=p.tags)&&(d.data=m)},u:function(){a(l);for(var t=0;t<g.length;t+=1)g[t].u()},d:function(){i(g)}}}function O(t,n){var i,s,l,u,h=n.res,f=n.loc,d=(n.res_index,n.idx),p=f.name,m=d!=[].concat(n.locationMap.get(h.loc)).length-1&&k(t,n);return{c:function(){i=r("div"),s=r("a"),l=c(p),m&&m.c(),this.h()},h:function(){M(i),M(s),s.href=u="/#/shelf/"+f.link,i.className="shelflink"},m:function(t,n){o(i,t,n),e(s,i),e(l,s),m&&m.m(i,null)},p:function(n,e){h=e.res,f=e.loc,e.res_index,d=e.idx,(n.locationMap||n.shelves)&&p!==(p=f.name)&&(l.data=p),(n.locationMap||n.shelves)&&u!==(u="/#/shelf/"+f.link)&&(s.href=u),d!=[].concat(e.locationMap.get(h.loc)).length-1?m||((m=k(t,e)).c(),m.m(i,null)):m&&(m.u(),m.d(),m=null)},u:function(){a(i),m&&m.u()},d:function(){m&&m.d()}}}function k(n,e){var i;e.res,e.loc,e.res_index,e.idx;return{c:function(){i=c(".")},m:function(t,n){o(i,t,n)},p:function(t,n){n.res,n.loc,n.res_index,n.idx},u:function(){a(i)},d:t}}function E(t,e){for(var r,c=e.shelves.results,l=[],u=0;u<c.length;u+=1)l[u]=P(t,n({},e,{res:c[u],res_index:u}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();r=s()},m:function(t,n){for(var e=0;e<l.length;e+=1)l[e].m(t,n);o(r,t,n)},p:function(e,o){var a=o.shelves.results;if(e.locationMap||e.shelves){for(var i=0;i<a.length;i+=1){var c=n({},o,{res:a[i],res_index:i});l[i]?l[i].p(e,c):(l[i]=P(t,c),l[i].c(),l[i].m(r.parentNode,r))}for(;i<l.length;i+=1)l[i].u(),l[i].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(r)},d:function(){i(l)}}}function L(t){var i,s,l,u,d,p,m,g;v(this,t),this._state=n({},t.data),this._fragment=(i=this,s=this._state,g=s.shelves.results&&E(i,s),{c:function(){l=r("div"),u=r("table"),(d=r("thead")).innerHTML="<tr><th svelte-2888509505>shelf</th><th svelte-2888509505>items</th></tr><tr></tr>",p=c("\n    "),m=r("tbody"),g&&g.c(),this.h()},h:function(){u.border="1",h(u,"cellspacing","0"),h(u,"cellpadding","3"),f(u,"max-width","250px")},m:function(t,n){o(l,t,n),e(u,l),e(d,u),e(p,u),e(m,u),g&&g.m(m,null)},p:function(t,n){n.shelves.results?g?g.p(t,n):((g=E(i,n)).c(),g.m(m,null)):g&&(g.u(),g.d(),g=null)},u:function(){a(l),g&&g.u()},d:function(){g&&g.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function C(t){h(t,"svelte-1030733036","")}function A(t,s){for(var l,u,h,d,p,m,v,g,_,b,x,y,w,M,P,O,k,E,L,A,H,j,T,R,N,U,I,B,q,D,F,W=s.res,z=(s.res_index,W.last_at.ago),G=W.item_id,K=W.data.callnumber,$=W.data.author,Z=W.data.title,J=W.last_at.ago,V=[].concat(s.locationMap.get(W.tags[0].temporary.loc)),Y=[],Q=0;Q<V.length;Q+=1)Y[Q]=S(t,n({},s,{loc:V[Q],idx:Q}));return{c:function(){l=r("tr"),u=r("td"),h=r("abbr"),d=c(z),p=c(" ago"),v=c("\n            "),g=r("td");for(var t=0;t<Y.length;t+=1)Y[t].c();_=c("\n            "),b=r("td"),x=r("a"),y=c(G),M=c("\n            "),P=r("td"),O=r("abbr"),k=c(K),L=c("\n            "),A=r("td"),H=r("abbr"),j=c($),R=c("\n            "),N=r("td"),U=c(Z),I=c("\n            "),B=r("td"),q=r("abbr"),D=c(J),this.h()},h:function(){C(u),h.title=m=W.last_at.iso8601,f(u,"background-color","#a9fbaf"),C(g),C(b),C(x),x.href=w="/#/item/"+W.item_id,C(P),O.title=E=W.data.callnumber,C(A),f(H,"text-decoration","none"),H.title=T=W.data.author,C(N),C(B),q.title=F=W.last_at.iso8601},m:function(t,n){o(l,t,n),e(u,l),e(h,u),e(d,h),e(p,h),e(v,l),e(g,l);for(var a=0;a<Y.length;a+=1)Y[a].m(g,null);e(_,l),e(b,l),e(x,b),e(y,x),e(M,l),e(P,l),e(O,P),e(k,O),e(L,l),e(A,l),e(H,A),e(j,H),e(R,l),e(N,l),e(U,N),e(I,l),e(B,l),e(q,B),e(D,q)},p:function(e,o){W=o.res,o.res_index,e.shelf&&z!==(z=W.last_at.ago)&&(d.data=z),e.shelf&&m!==(m=W.last_at.iso8601)&&(h.title=m);var a=[].concat(o.locationMap.get(W.tags[0].temporary.loc));if(e.locationMap||e.shelf){for(var i=0;i<a.length;i+=1){var r=n({},o,{loc:a[i],idx:i});Y[i]?Y[i].p(e,r):(Y[i]=S(t,r),Y[i].c(),Y[i].m(g,null))}for(;i<Y.length;i+=1)Y[i].u(),Y[i].d();Y.length=a.length}e.shelf&&G!==(G=W.item_id)&&(y.data=G),e.shelf&&w!==(w="/#/item/"+W.item_id)&&(x.href=w),e.shelf&&K!==(K=W.data.callnumber)&&(k.data=K),e.shelf&&E!==(E=W.data.callnumber)&&(O.title=E),e.shelf&&$!==($=W.data.author)&&(j.data=$),e.shelf&&T!==(T=W.data.author)&&(H.title=T),e.shelf&&Z!==(Z=W.data.title)&&(U.data=Z),e.shelf&&J!==(J=W.last_at.ago)&&(D.data=J),e.shelf&&F!==(F=W.last_at.iso8601)&&(q.title=F)},u:function(){a(l);for(var t=0;t<Y.length;t+=1)Y[t].u()},d:function(){i(Y)}}}function S(t,n){var i,s,l,u,h=n.res,f=n.loc,d=(n.res_index,n.idx),p=f.name,m=d!=[].concat(n.locationMap.get(h.tags[0].temporary.loc)).length-1&&H(t,n);return{c:function(){i=r("div"),s=r("a"),l=c(p),m&&m.c(),this.h()},h:function(){C(i),C(s),s.href=u="/#/shelf/"+f.link,i.className="shelflink"},m:function(t,n){o(i,t,n),e(s,i),e(l,s),m&&m.m(i,null)},p:function(n,e){h=e.res,f=e.loc,e.res_index,d=e.idx,(n.locationMap||n.shelf)&&p!==(p=f.name)&&(l.data=p),(n.locationMap||n.shelf)&&u!==(u="/#/shelf/"+f.link)&&(s.href=u),d!=[].concat(e.locationMap.get(h.tags[0].temporary.loc)).length-1?m||((m=H(t,e)).c(),m.m(i,null)):m&&(m.u(),m.d(),m=null)},u:function(){a(i),m&&m.u()},d:function(){m&&m.d()}}}function H(n,e){var i;e.res,e.loc,e.res_index,e.idx;return{c:function(){i=c(".")},m:function(t,n){o(i,t,n)},p:function(t,n){n.res,n.loc,n.res_index,n.idx},u:function(){a(i)},d:t}}function j(t,e){for(var r,c=e.shelf.results,l=[],u=0;u<c.length;u+=1)l[u]=A(t,n({},e,{res:c[u],res_index:u}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();r=s()},m:function(t,n){for(var e=0;e<l.length;e+=1)l[e].m(t,n);o(r,t,n)},p:function(e,o){var a=o.shelf.results;if(e.shelf||e.locationMap){for(var i=0;i<a.length;i+=1){var c=n({},o,{res:a[i],res_index:i});l[i]?l[i].p(e,c):(l[i]=A(t,c),l[i].c(),l[i].m(r.parentNode,r))}for(;i<l.length;i+=1)l[i].u(),l[i].d();l.length=a.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();a(r)},d:function(){i(l)}}}function T(t){var i,s,l,u,f,d,p,m;v(this,t),this._state=n({},t.data),this._fragment=(i=this,s=this._state,m=s.shelf.results&&j(i,s),{c:function(){l=r("div"),u=r("table"),(f=r("thead")).innerHTML='<tr><th svelte-1030733036>at</th><th svelte-1030733036>location</th><th svelte-1030733036>barcode</th><th svelte-1030733036>callnum</th><th svelte-1030733036 width="15%">author</th><th svelte-1030733036>title</th><th svelte-1030733036>last</th></tr>',d=c("\n    "),p=r("tbody"),m&&m.c(),this.h()},h:function(){u.border="1",h(u,"cellspacing","0"),h(u,"cellpadding","3")},m:function(t,n){o(l,t,n),e(u,l),e(f,u),e(d,u),e(p,u),m&&m.m(p,null)},p:function(t,n){n.shelf.results?m?m.p(t,n):((m=j(i,n)).c(),m.m(p,null)):m&&(m.u(),m.d(),m=null)},u:function(){a(l),m&&m.u()},d:function(){m&&m.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}n(L.prototype,_),n(T.prototype,_);w.createRouter;function R(t){h(t,"svelte-422554819","")}function N(t,n){var e,i,s,l,u=n.path.shelfId,h=new T({root:t.root,data:{shelf:n.shelf,locationMap:n.locationMap}});return{c:function(){e=c("Shelf: "),i=c(u),s=c("\n    "),l=r("div"),h._fragment.c(),this.h()},h:function(){R(l),l.className="shelf-content"},m:function(t,n){o(e,t,n),o(i,t,n),o(s,t,n),o(l,t,n),h._mount(l,null)},p:function(t,n){t.path&&u!==(u=n.path.shelfId)&&(i.data=u);var e={};t.shelf&&(e.shelf=n.shelf),t.locationMap&&(e.locationMap=n.locationMap),h._set(e)},u:function(){a(e),a(i),a(s),a(l)},d:function(){h.destroy(!1)}}}function U(t){v(this,t),this._state=n({shelves:{},shelf:{},locationMap:null},t.data);var i,s,l,u,h,f,d,p=function(){var t=this,n="http://spore.deichman.no/api";fetch(n+"/shelves").then(function(t){return t.json()}).then(function(n){return new Promise(function(e){var o=new Map;for(var a of n.results){for(var i=new Set,r=a.loc.split("."),c=0;c<r.length;c++)i.add({link:""+r.slice(0,c+1).join("."),name:r[c]});o.set(a.loc,i)}e(t.set({locationMap:o,shelves:n}))})}).then(function(){var e=t.get("path");return e.shelfId?Promise.resolve(fetch(n+"/shelf/"+e.shelfId)):Promise.reject("No shelf id")}).then(function(t){return t.json()}).then(function(n){return t.set({shelf:n})}).catch(function(t){console.log("something broke: "+t)})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(i=this,s=this._state,f=new L({root:i.root,data:{shelves:s.shelves,locationMap:s.locationMap}}),d=s.path.shelfId&&N(i,s),{c:function(){l=r("div"),u=r("div"),f._fragment.c(),h=c("\n  "),d&&d.c(),this.h()},h:function(){R(l),R(u),u.className="shelf-list",l.className="container"},m:function(t,n){o(l,t,n),e(u,l),f._mount(u,null),e(h,l),d&&d.m(l,null)},p:function(t,n){var e={};t.shelves&&(e.shelves=n.shelves),t.locationMap&&(e.locationMap=n.locationMap),f._set(e),n.path.shelfId?d?d.p(t,n):((d=N(i,n)).c(),d.m(l,null)):d&&(d.u(),d.d(),d=null)},u:function(){a(l),d&&d.u()},d:function(){f.destroy(!1),d&&d.d()}}),this.root._oncreate.push(p),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function I(t){h(t,"svelte-3891022760","")}function B(t,n){var i,s,l,u,h,d,p,m,v,g,_,b,x,y,w,M,P,O,k,E,L,C,A,S,H,j,T,R,N,U,B,D,F,z,G,$,Z=n.tag,J=(n.tag_index,Z.permanent.dev),V=Z.temporary.at.iso8601,Y=Z.permanent.at&&q(t,n),Q=Z.permanent.loc&&W(t,n),X=Z.temporary.loc&&K(t,n);return{c:function(){(i=r("tr")).innerHTML='<th svelte-3891022760 colspan="2">tag</th>',s=c("\n        "),l=r("tr"),(u=r("td")).textContent="last_at",h=c("\n          "),Y&&Y.c(),d=c("\n        "),(p=r("tr")).innerHTML="<td svelte-3891022760>last_dev</td><td svelte-3891022760>hutl.rfidhub.10.172.3.70</td>",m=c("\n        "),v=r("tr"),(g=r("td")).textContent="rfid",_=r("td"),b=r("a"),x=c("CHECK "),y=c(J),M=c("\n        "),P=r("tr"),(O=r("td")).textContent="shelf",k=c("\n          "),E=r("td"),Q&&Q.c(),L=c("\n        "),(C=r("tr")).innerHTML='<td svelte-3891022760>shelf_at</td><td svelte-3891022760 style="background: #f4a53f; "><abbr title="Tue Jul 18 12:58:05 2017">2017-07-18</abbr></td>',A=c("\n        "),(S=r("tr")).innerHTML='<td svelte-3891022760>shelf_dev</td><td svelte-3891022760><span svelte-3891022760 class="hex">NULL</span></td>',H=c("\n        "),j=r("tr"),(T=r("td")).textContent="temp",R=c("\n          "),N=r("td"),X&&X.c(),U=c("\n        "),B=r("tr"),(D=r("td")).textContent="temp_at",F=r("td"),z=r("abbr"),G=c("CHECK "),$=c(V),this.h()},h:function(){I(i),I(l),I(u),I(p),I(v),I(g),I(_),b.href=w="/#/dev/"+Z.permanent.dev,I(P),I(O),I(E),I(C),I(S),I(j),I(T),I(N),I(B),I(D),I(F),z.title="Tue Feb 27 10:16:09 2018",f(F,"background","#99fec8")},m:function(t,n){o(i,t,n),o(s,t,n),o(l,t,n),e(u,l),e(h,l),Y&&Y.m(l,null),o(d,t,n),o(p,t,n),o(m,t,n),o(v,t,n),e(g,v),e(_,v),e(b,_),e(x,b),e(y,b),o(M,t,n),o(P,t,n),e(O,P),e(k,P),e(E,P),Q&&Q.m(E,null),o(L,t,n),o(C,t,n),o(A,t,n),o(S,t,n),o(H,t,n),o(j,t,n),e(T,j),e(R,j),e(N,j),X&&X.m(N,null),o(U,t,n),o(B,t,n),e(D,B),e(F,B),e(z,F),e(G,z),e($,z)},p:function(n,e){Z=e.tag,e.tag_index,Z.permanent.at?Y?Y.p(n,e):((Y=q(t,e)).c(),Y.m(l,null)):Y&&(Y.u(),Y.d(),Y=null),n.item&&J!==(J=Z.permanent.dev)&&(y.data=J),n.item&&w!==(w="/#/dev/"+Z.permanent.dev)&&(b.href=w),Z.permanent.loc?Q?Q.p(n,e):((Q=W(t,e)).c(),Q.m(E,null)):Q&&(Q.u(),Q.d(),Q=null),Z.temporary.loc?X?X.p(n,e):((X=K(t,e)).c(),X.m(N,null)):X&&(X.u(),X.d(),X=null),n.item&&V!==(V=Z.temporary.at.iso8601)&&($.data=V)},u:function(){a(i),a(s),a(l),Y&&Y.u(),a(d),a(p),a(m),a(v),a(M),a(P),Q&&Q.u(),a(L),a(C),a(A),a(S),a(H),a(j),X&&X.u(),a(U),a(B)},d:function(){Y&&Y.d(),Q&&Q.d(),X&&X.d()}}}function q(n,i){var s,l,u,h,d=i.tag,p=(i.tag_index,d.permanent.at.iso8601);return{c:function(){s=r("td"),l=r("abbr"),u=c("CHECK "),h=c(p),this.h()},h:function(){I(s),l.title="Tue Feb 27 10:16:09 2018",f(s,"background","#99fec8")},m:function(t,n){o(s,t,n),e(l,s),e(u,l),e(h,l)},p:function(t,n){d=n.tag,n.tag_index,t.item&&p!==(p=d.permanent.at.iso8601)&&(h.data=p)},u:function(){a(s)},d:t}}function D(t,n){var i,s,l,u,h=n.tag,f=n.loc,d=(n.tag_index,n.idx),p=f.name,m=d!=[].concat(n.locationMap.get(h.permanent.loc)).length-1&&F(t,n);return{c:function(){i=r("div"),s=r("a"),l=c(p),m&&m.c(),this.h()},h:function(){s.href=u="/#/shelf/"+f.link,i.className="shelflink"},m:function(t,n){o(i,t,n),e(s,i),e(l,s),m&&m.m(i,null)},p:function(n,e){h=e.tag,f=e.loc,e.tag_index,d=e.idx,(n.locationMap||n.item)&&p!==(p=f.name)&&(l.data=p),(n.locationMap||n.item)&&u!==(u="/#/shelf/"+f.link)&&(s.href=u),d!=[].concat(e.locationMap.get(h.permanent.loc)).length-1?m||((m=F(t,e)).c(),m.m(i,null)):m&&(m.u(),m.d(),m=null)},u:function(){a(i),m&&m.u()},d:function(){m&&m.d()}}}function F(n,e){var i;e.tag,e.loc,e.tag_index,e.idx;return{c:function(){i=c(".")},m:function(t,n){o(i,t,n)},p:function(t,n){n.tag,n.loc,n.tag_index,n.idx},u:function(){a(i)},d:t}}function W(t,e){for(var r,c=e.tag,l=(e.tag_index,[].concat(e.locationMap.get(c.permanent.loc))),u=[],h=0;h<l.length;h+=1)u[h]=D(t,n({},e,{loc:l[h],idx:h}));return{c:function(){for(var t=0;t<u.length;t+=1)u[t].c();r=s()},m:function(t,n){for(var e=0;e<u.length;e+=1)u[e].m(t,n);o(r,t,n)},p:function(e,o){c=o.tag,o.tag_index;var a=[].concat(o.locationMap.get(c.permanent.loc));if(e.locationMap||e.item){for(var i=0;i<a.length;i+=1){var s=n({},o,{loc:a[i],idx:i});u[i]?u[i].p(e,s):(u[i]=D(t,s),u[i].c(),u[i].m(r.parentNode,r))}for(;i<u.length;i+=1)u[i].u(),u[i].d();u.length=a.length}},u:function(){for(var t=0;t<u.length;t+=1)u[t].u();a(r)},d:function(){i(u)}}}function z(t,n){var i,s,l,u,h=n.tag,f=n.loc,d=(n.tag_index,n.idx),p=f.name,m=d!=[].concat(n.locationMap.get(h.temporary.loc)).length-1&&G(t,n);return{c:function(){i=r("div"),s=r("a"),l=c(p),m&&m.c(),this.h()},h:function(){s.href=u="/#/shelf/"+f.link,i.className="shelflink"},m:function(t,n){o(i,t,n),e(s,i),e(l,s),m&&m.m(i,null)},p:function(n,e){h=e.tag,f=e.loc,e.tag_index,d=e.idx,(n.locationMap||n.item)&&p!==(p=f.name)&&(l.data=p),(n.locationMap||n.item)&&u!==(u="/#/shelf/"+f.link)&&(s.href=u),d!=[].concat(e.locationMap.get(h.temporary.loc)).length-1?m||((m=G(t,e)).c(),m.m(i,null)):m&&(m.u(),m.d(),m=null)},u:function(){a(i),m&&m.u()},d:function(){m&&m.d()}}}function G(n,e){var i;e.tag,e.loc,e.tag_index,e.idx;return{c:function(){i=c(".")},m:function(t,n){o(i,t,n)},p:function(t,n){n.tag,n.loc,n.tag_index,n.idx},u:function(){a(i)},d:t}}function K(t,e){for(var r,c=e.tag,l=(e.tag_index,[].concat(e.locationMap.get(c.temporary.loc))),u=[],h=0;h<l.length;h+=1)u[h]=z(t,n({},e,{loc:l[h],idx:h}));return{c:function(){for(var t=0;t<u.length;t+=1)u[t].c();r=s()},m:function(t,n){for(var e=0;e<u.length;e+=1)u[e].m(t,n);o(r,t,n)},p:function(e,o){c=o.tag,o.tag_index;var a=[].concat(o.locationMap.get(c.temporary.loc));if(e.locationMap||e.item){for(var i=0;i<a.length;i+=1){var s=n({},o,{loc:a[i],idx:i});u[i]?u[i].p(e,s):(u[i]=z(t,s),u[i].c(),u[i].m(r.parentNode,r))}for(;i<u.length;i+=1)u[i].u(),u[i].d();u.length=a.length}},u:function(){for(var t=0;t<u.length;t+=1)u[t].u();a(r)},d:function(){i(u)}}}function $(t,s){for(var l,u,d,p,m,v,g,_,b,x,y,w,M,P,O,k,E,L,C,A,S,H,j,T,R,N,U,q,D,F,W,z,G,K,$,Z=s.item.response.meta.title,J=s.item.response.meta.author,V=s.item.response.meta.callnumber,Y=s.item.item_id,Q=s.item.response.meta.biblionumber,X=s.item.response.tags,tt=[],nt=0;nt<X.length;nt+=1)tt[nt]=B(t,n({},s,{tag:X[nt],tag_index:nt}));return{c:function(){l=r("table"),u=r("tr"),d=r("th"),p=c(Z),m=c("\n    "),v=r("tr"),(g=r("td")).textContent="author",_=r("td"),b=c(J),x=c("\n    "),y=r("tr"),(w=r("td")).textContent="cn",M=r("td"),P=r("abbr"),O=c(V),E=c("\n    "),L=r("tr"),(C=r("td")).textContent="barcode",A=r("td"),S=r("a"),H=c(Y),T=c("\n    "),R=r("tr"),(N=r("td")).textContent="bibnum",U=r("td"),q=c(Q),D=c(" ["),(F=r("a")).textContent="Koha",z=c("]"),G=c("\n    "),(K=r("tr")).innerHTML="<td svelte-3891022760>pubid</td><td svelte-3891022760>notgiveninapi</td>",$=c("\n    \n      ");for(var t=0;t<tt.length;t+=1)tt[t].c();this.h()},h:function(){I(u),I(d),d.colSpan="2",I(v),I(g),I(_),I(y),I(w),I(M),P.title=k=s.item.response.meta.callnumber,I(L),I(C),I(A),S.href=j="/#/item/"+s.item.item_id,I(R),I(N),I(U),F.href=W="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+s.item.response.meta.biblionumber,I(K),l.border="1",h(l,"cellspacing","0"),h(l,"cellpadding","3"),f(l,"max-width","250px")},m:function(t,n){o(l,t,n),e(u,l),e(d,u),e(p,d),e(m,l),e(v,l),e(g,v),e(_,v),e(b,_),e(x,l),e(y,l),e(w,y),e(M,y),e(P,M),e(O,P),e(E,l),e(L,l),e(C,L),e(A,L),e(S,A),e(H,S),e(T,l),e(R,l),e(N,R),e(U,R),e(q,U),e(D,U),e(F,U),e(z,U),e(G,l),e(K,l),e($,l);for(var a=0;a<tt.length;a+=1)tt[a].m(l,null)},p:function(e,o){e.item&&Z!==(Z=o.item.response.meta.title)&&(p.data=Z),e.item&&J!==(J=o.item.response.meta.author)&&(b.data=J),e.item&&V!==(V=o.item.response.meta.callnumber)&&(O.data=V),e.item&&k!==(k=o.item.response.meta.callnumber)&&(P.title=k),e.item&&Y!==(Y=o.item.item_id)&&(H.data=Y),e.item&&j!==(j="/#/item/"+o.item.item_id)&&(S.href=j),e.item&&Q!==(Q=o.item.response.meta.biblionumber)&&(q.data=Q),e.item&&W!==(W="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+o.item.response.meta.biblionumber)&&(F.href=W);var a=o.item.response.tags;if(e.item||e.locationMap){for(var i=0;i<a.length;i+=1){var r=n({},o,{tag:a[i],tag_index:i});tt[i]?tt[i].p(e,r):(tt[i]=B(t,r),tt[i].c(),tt[i].m(l,null))}for(;i<tt.length;i+=1)tt[i].u(),tt[i].d();tt.length=a.length}},u:function(){a(l);for(var t=0;t<tt.length;t+=1)tt[t].u()},d:function(){i(tt)}}}function Z(t){var e,i,c,s;v(this,t),this._state=n({},t.data),this._fragment=(e=this,i=this._state,s=i.item&&i.locationMap&&$(e,i),{c:function(){c=r("div"),s&&s.c()},m:function(t,n){o(c,t,n),s&&s.m(c,null)},p:function(t,n){n.item&&n.locationMap?s?s.p(t,n):((s=$(e,n)).c(),s.m(c,null)):s&&(s.u(),s.d(),s=null)},u:function(){a(c),s&&s.u()},d:function(){s&&s.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}n(U.prototype,_),n(Z.prototype,_);var J={handleSubmit:function(t){t.preventDefault(),console.log(t)}};function V(t){h(t,"svelte-3367627042","")}function Y(t,s){for(var l,u,h,f,d,p,m,v,g,_,b,x=s.it,y=(s.it_index,x.at.ago),w=x.actions.join(" "),M=x.dev,P=[].concat(s.locationMap.get(x.location)),O=[],k=0;k<P.length;k+=1)O[k]=Q(t,n({},s,{loc:P[k],idx:k}));return{c:function(){l=r("tr"),u=r("td"),h=c(y),f=c(" ago"),d=c("\n            "),p=r("td");for(var t=0;t<O.length;t+=1)O[t].c();m=c("\n            "),v=r("td"),g=c(w),_=r("td"),b=c(M),this.h()},h:function(){V(u),V(p),V(v),V(_)},m:function(t,n){o(l,t,n),e(u,l),e(h,u),e(f,u),e(d,l),e(p,l);for(var a=0;a<O.length;a+=1)O[a].m(p,null);e(m,l),e(v,l),e(g,v),e(_,l),e(b,_)},p:function(e,o){x=o.it,o.it_index,e.item&&y!==(y=x.at.ago)&&(h.data=y);var a=[].concat(o.locationMap.get(x.location));if(e.locationMap||e.item){for(var i=0;i<a.length;i+=1){var r=n({},o,{loc:a[i],idx:i});O[i]?O[i].p(e,r):(O[i]=Q(t,r),O[i].c(),O[i].m(p,null))}for(;i<O.length;i+=1)O[i].u(),O[i].d();O.length=a.length}e.item&&w!==(w=x.actions.join(" "))&&(g.data=w),e.item&&M!==(M=x.dev)&&(b.data=M)},u:function(){a(l);for(var t=0;t<O.length;t+=1)O[t].u()},d:function(){i(O)}}}function Q(t,n){var i,s,l,u,h=n.it,f=n.loc,d=(n.it_index,n.idx),p=f.name,m=d!=[].concat(n.locationMap.get(h.location)).length-1&&X(t,n);return{c:function(){i=r("div"),s=r("a"),l=c(p),m&&m.c(),this.h()},h:function(){V(i),V(s),s.href=u="/#/shelf/"+f.link,i.className="shelflink"},m:function(t,n){o(i,t,n),e(s,i),e(l,s),m&&m.m(i,null)},p:function(n,e){h=e.it,f=e.loc,e.it_index,d=e.idx,(n.locationMap||n.item)&&p!==(p=f.name)&&(l.data=p),(n.locationMap||n.item)&&u!==(u="/#/shelf/"+f.link)&&(s.href=u),d!=[].concat(e.locationMap.get(h.location)).length-1?m||((m=X(t,e)).c(),m.m(i,null)):m&&(m.u(),m.d(),m=null)},u:function(){a(i),m&&m.u()},d:function(){m&&m.d()}}}function X(n,e){var i;e.it,e.loc,e.it_index,e.idx;return{c:function(){i=c(".")},m:function(t,n){o(i,t,n)},p:function(t,n){n.it,n.loc,n.it_index,n.idx},u:function(){a(i)},d:t}}function tt(t,s){var d,p,m,v,g,_,b,x,y,w,M,P,O,k,E,L,C,A,S,H,j,T,R,N,U,I,B=s.item.response.meta.title,q=s.item.response.meta.author;function D(n){t.handleSubmit(n)}for(var F=s.item.response.history,W=[],z=0;z<F.length;z+=1)W[z]=Y(t,n({},s,{it:F[z],it_index:z}));return{c:function(){d=r("h1"),p=c("-- "),m=c(s.barcode),v=c(" "),g=c(B),_=c("\n    "),(b=r("form")).innerHTML='<label for="code">Barcode:</label>\n    <input id="code" name="code" class="ui-autocomplete-input" autocomplete="off">',x=c("\n    "),y=r("hr"),w=c("\n    "),(M=r("h2")).textContent="transaction log",P=c("\n    "),O=r("span"),k=c("Barcode: "),E=c(s.barcode),L=r("br"),C=c("\n    "),A=r("span"),S=c("Author: "),H=c(q),j=r("br"),T=c("\n\n    "),R=r("table"),(N=r("thead")).innerHTML="<tr><th svelte-3367627042>at</th><th svelte-3367627042>shelf</th><th svelte-3367627042>type</th><th svelte-3367627042>rfid</th></tr>",U=c("\n      "),I=r("tbody");for(var t=0;t<W.length;t+=1)W[t].c();this.h()},h:function(){l(b,"submit",D),h(y,"size","1"),R.border="1",h(R,"cellspacing","0"),h(R,"cellpadding","3"),f(R,"max-width","250px")},m:function(t,n){o(d,t,n),e(p,d),e(m,d),e(v,d),e(g,d),o(_,t,n),o(b,t,n),o(x,t,n),o(y,t,n),o(w,t,n),o(M,t,n),o(P,t,n),o(O,t,n),e(k,O),e(E,O),o(L,t,n),o(C,t,n),o(A,t,n),e(S,A),e(H,A),o(j,t,n),o(T,t,n),o(R,t,n),e(N,R),e(U,R),e(I,R);for(var a=0;a<W.length;a+=1)W[a].m(I,null)},p:function(e,o){e.barcode&&(m.data=o.barcode),e.item&&B!==(B=o.item.response.meta.title)&&(g.data=B),e.barcode&&(E.data=o.barcode),e.item&&q!==(q=o.item.response.meta.author)&&(H.data=q);var a=o.item.response.history;if(e.item||e.locationMap){for(var i=0;i<a.length;i+=1){var r=n({},o,{it:a[i],it_index:i});W[i]?W[i].p(e,r):(W[i]=Y(t,r),W[i].c(),W[i].m(I,null))}for(;i<W.length;i+=1)W[i].u(),W[i].d();W.length=a.length}},u:function(){a(d),a(_),a(b),a(x),a(y),a(w),a(M),a(P),a(O),a(L),a(C),a(A),a(j),a(T),a(R);for(var t=0;t<W.length;t+=1)W[t].u()},d:function(){u(b,"submit",D),i(W)}}}function nt(t){var e,i,c,s;v(this,t),this._state=n({},t.data),this._fragment=(e=this,i=this._state,s=i.item&&tt(e,i),{c:function(){c=r("div"),s&&s.c()},m:function(t,n){o(c,t,n),s&&s.m(c,null)},p:function(t,n){n.item?s?s.p(t,n):((s=tt(e,n)).c(),s.m(c,null)):s&&(s.u(),s.d(),s=null)},u:function(){a(c),s&&s.u()},d:function(){s&&s.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}n(nt.prototype,J,_);var et=w.createRouter;var ot={goHome:function(){et.replace("/")}};function at(t){h(t,"svelte-1628860350","")}function it(t){v(this,t),this._state=n({item:null,locationMap:null},t.data);var i,s,l,u,h,f,d,p,m=function(){var t=this,n="http://spore.deichman.no/api";fetch(n+"/shelves").then(function(t){return t.json()}).then(function(n){return new Promise(function(e){var o=new Map;for(var a of n.results){for(var i=new Set,r=a.loc.split("."),c=0;c<r.length;c++)i.add({link:""+r.slice(0,c+1).join("."),name:r[c]});o.set(a.loc,i)}e(t.set({locationMap:o}))})}).then(function(){var e=t.get("path");return e.barcode?Promise.resolve(fetch(n+"/item/NO:02030000/"+e.barcode)):Promise.reject("No shelf id")}).then(function(t){return t.json()}).then(function(n){return console.log(n),t.set({item:n})}).catch(function(t){console.log("something broke: "+t)})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(i=this,s=this._state,d=new Z({root:i.root,data:{item:s.item,locationMap:s.locationMap}}),p=new nt({root:i.root,data:{barcode:s.path.barcode,item:s.item,locationMap:s.locationMap}}),{c:function(){l=r("div"),u=r("div"),d._fragment.c(),h=c("\n  "),f=r("div"),p._fragment.c(),this.h()},h:function(){at(l),at(u),u.className="item-info",at(f),f.className="history",l.className="container"},m:function(t,n){o(l,t,n),e(u,l),d._mount(u,null),e(h,l),e(f,l),p._mount(f,null)},p:function(t,n){var e={};t.item&&(e.item=n.item),t.locationMap&&(e.locationMap=n.locationMap),d._set(e);var o={};t.path&&(o.barcode=n.path.barcode),t.item&&(o.item=n.item),t.locationMap&&(o.locationMap=n.locationMap),p._set(o)},u:function(){a(l)},d:function(){d.destroy(!1),p.destroy(!1)}}),this.root._oncreate.push(m),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}n(it.prototype,ot,_);var rt=w.createRouter,ct={goHome:function(){rt.replace("/")}};function st(e){v(this,e),this._state=n({},e.data),this._fragment=function(n,e){var i,s,h;function f(t){n.goHome()}return{c:function(){(i=r("h1")).textContent="404 Not Found",s=c("\n"),(h=r("button")).textContent="Go Home",this.h()},h:function(){l(h,"click",f)},m:function(t,n){o(i,t,n),o(s,t,n),o(h,t,n)},p:t,u:function(){a(i),a(s),a(h)},d:function(){u(h,"click",f)}}}(this,this._state),e.target&&(this._fragment.c(),this._fragment.m(e.target,e.anchor||null))}n(st.prototype,ct,_);var lt=w.createRouter,ut=w.RouterLink,ht=lt({"/":U,"/shelf":U,"/shelf/:shelfId":U,"/item/:barcode":{Component:it,props:{data:{salutation:"Hello"}}}},{pathRegex:"[a-zA-Z0-9.]+",defaultRoute:st});function ft(){ht.destroy()}function dt(n,i){var s,l,u,h,f=new ut({root:n.root,slots:{default:document.createDocumentFragment()},data:{to:"/shelf"}});return{c:function(){s=r("div"),l=c("Shelf"),f._fragment.c(),u=c("\n  "),h=r("div"),this.h()},h:function(){h.id="app"},m:function(t,n){o(s,t,n),e(l,f._slotted.default),f._mount(s,null),e(u,s),e(h,s)},p:t,u:function(){a(s)},d:function(){f.destroy(!1)}}}function pt(t){v(this,t),this._state=n({},t.data),this._handlers.destroy=[ft];var e=function(){ht.create("#app")}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=dt(this,this._state),this.root._oncreate.push(e),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}return lt.listen(function(){console.log("router changed")}),n(pt.prototype,_),new pt({target:document.body,data:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
