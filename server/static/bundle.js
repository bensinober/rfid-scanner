var app=function(){"use strict";function t(){}function e(t){for(var e,n,o=1,i=arguments.length;o<i;o++)for(e in n=arguments[o])t[e]=n[e];return t}function n(t,e){e.appendChild(t)}function o(t,e,n){e.insertBefore(t,n)}function i(t){t.parentNode.removeChild(t)}function r(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function a(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function c(){return document.createComment("")}function l(t,e,n){t.addEventListener(e,n,!1)}function u(t,e,n){t.removeEventListener(e,n,!1)}function h(t,e,n){t.setAttribute(e,n)}function f(t,e,n){t.style.setProperty(e,n)}function d(){return Object.create(null)}function m(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function p(t,e,n,o,i){for(var r in e)if(n[r]){var a=o[r],s=i[r],c=e[r];if(c)for(var l=0;l<c.length;l+=1){var u=c[l];u.__calling||(u.__calling=!0,u.call(t,a,s),u.__calling=!1)}}}function v(t,e){t._observers={pre:d(),post:d()},t._handlers=d(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function g(t){for(;t&&t.length;)t.shift()()}var _={destroy:m,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1)n[o].call(this,e)},observe:function(t,e,n){var o=n&&n.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=o[t].indexOf(e);~n&&o[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,g(this.root._beforecreate),g(this.root._oncreate),g(this.root._aftercreate),this.root._lock=!1)},teardown:m,_recompute:t,_set:function(t){var n=this._state,o={},i=!1;for(var r in t)this._differs(t[r],n[r])&&(o[r]=i=!0);i&&(this._state=e({},n,t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(p(this,this._observers.pre,o,this._state,n),this._fragment.p(o,this._state),p(this,this._observers.post,o,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var b,y,x=(function(t,e){t.exports=function(){function t(){}function e(t){for(var e,n,o=1,i=arguments.length;o<i;o++)for(e in n=arguments[o])t[e]=n[e];return t}function n(){return Object.create(null)}function o(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function i(t,e,n,o,i){for(var r in e)if(n[r]){var a=o[r],s=i[r],c=e[r];if(c)for(var l=0;l<c.length;l+=1){var u=c[l];u.__calling||(u.__calling=!0,u.call(t,a,s),u.__calling=!1)}}}function r(t){for(;t&&t.length;)t.shift()()}var a={destroy:o,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var o=0;o<n.length;o+=1)n[o].call(this,e)},observe:function(t,e,n){var o=n&&n.defer?this._observers.post:this._observers.pre;return(o[t]||(o[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=o[t].indexOf(e);~n&&o[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,r(this.root._beforecreate),r(this.root._oncreate),r(this.root._aftercreate),this.root._lock=!1)},teardown:o,_recompute:t,_set:function(t){var n=this._state,o={},r=!1;for(var a in t)this._differs(t[a],n[a])&&(o[a]=r=!0);r&&(this._state=e({},n,t),this._recompute(o,this._state),this._bind&&this._bind(o,this._state),this._fragment&&(i(this,this._observers.pre,o,this._state,n),this._fragment.p(o,this._state),i(this,this._observers.post,o,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c(t,e){return t(e={exports:{}},e.exports),e.exports}var l=function(t,e,n){var o=arguments.length;n=new Array(o>2?o-2:0);for(var i=2;i<o;i++)n[i-2]=arguments[i];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var r=0,a="Warning: "+e.replace(/%s/g,function(){return n[r++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(t){}}},u=function(t,e,n,o,i,r,a,s){if(void 0===e)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,o,i,r,a,s],u=0;(c=new Error(e.replace(/%s/g,function(){return l[u++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}};function h(t){return"/"===t.charAt(0)}function f(t,e){for(var n=e,o=n+1,i=t.length;o<i;n+=1,o+=1)t[n]=t[o];t.pop()}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],o=e&&e.split("/")||[],i=t&&h(t),r=e&&h(e),a=i||r;if(t&&h(t)?o=n:n.length&&(o.pop(),o=o.concat(n)),!o.length)return"/";var s=void 0;if(o.length){var c=o[o.length-1];s="."===c||".."===c||""===c}else s=!1;for(var l=0,u=o.length;u>=0;u--){var d=o[u];"."===d?f(o,u):".."===d?(f(o,u),l++):l&&(f(o,u),l--)}if(!a)for(;l--;l)o.unshift("..");!a||""===o[0]||o[0]&&h(o[0])||o.unshift("");var m=o.join("/");return s&&"/"!==m.substr(-1)&&(m+="/"),m}var m=Object.freeze({default:d}),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function v(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return v(t,e[n])});var n=void 0===t?"undefined":p(t);if(n!==(void 0===e?"undefined":p(e)))return!1;if("object"===n){var o=t.valueOf(),i=e.valueOf();if(o!==t||i!==e)return v(o,i);var r=Object.keys(t),a=Object.keys(e);return r.length===a.length&&r.every(function(n){return v(t[n],e[n])})}return!1}var g=Object.freeze({default:v}),_=c(function(t,e){e.__esModule=!0,e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t};var n=e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)};e.stripBasename=function(t,e){return n(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",o="",i=e.indexOf("#");-1!==i&&(o=e.substr(i),e=e.substr(0,i));var r=e.indexOf("?");return-1!==r&&(n=e.substr(r),e=e.substr(0,r)),{pathname:e,search:"?"===n?"":n,hash:"#"===o?"":o}},e.createPath=function(t){var e=t.pathname,n=t.search,o=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),o&&"#"!==o&&(i+="#"===o.charAt(0)?o:"#"+o),i}});s(_),_.addLeadingSlash,_.stripLeadingSlash,_.hasBasename,_.stripBasename,_.stripTrailingSlash,_.parsePath,_.createPath;var b=m&&d||m,y=g&&v||g,x=c(function(t,e){e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},o=r(b),i=r(y);function r(t){return t&&t.__esModule?t:{default:t}}e.createLocation=function(t,e,i,r){var a=void 0;"string"==typeof t?(a=(0,_.parsePath)(t)).state=e:(void 0===(a=n({},t)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==e&&void 0===a.state&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return i&&(a.key=i),r?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=(0,o.default)(a.pathname,r.pathname)):a.pathname=r.pathname:a.pathname||(a.pathname="/"),a},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,i.default)(t.state,e.state)}});s(x),x.locationsAreEqual,x.createLocation;var w=c(function(t,e){e.__esModule=!0;var n,o=(n=l)&&n.__esModule?n:{default:n};e.default=function(){var t=null,e=[];return{setPrompt:function(e){return(0,o.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,i,r){if(null!=t){var a="function"==typeof t?t(e,n):t;"string"==typeof a?"function"==typeof i?i(a,r):((0,o.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),r(!0)):r(!1!==a)}else r(!0)},appendListener:function(t){var n=!0,o=function(){n&&t.apply(void 0,arguments)};return e.push(o),function(){n=!1,e=e.filter(function(t){return t!==o})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];e.forEach(function(t){return t.apply(void 0,n)})}}}});s(w);var M=c(function(t,e){e.__esModule=!0,e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}});s(M),M.canUseDOM,M.addEventListener,M.removeEventListener,M.getConfirmation,M.supportsHistory,M.supportsPopStateOnHashChange,M.supportsGoWithoutReloadUsingHash,M.isExtraneousPopstateEvent;var P=s(c(function(t,e){e.__esModule=!0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},o=a(l),i=a(u),r=a(w);function a(t){return t&&t.__esModule?t:{default:t}}var s={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,_.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:_.stripLeadingSlash,decodePath:_.addLeadingSlash},slash:{encodePath:_.addLeadingSlash,decodePath:_.addLeadingSlash}},c=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},h=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,i.default)(M.canUseDOM,"Hash history needs a DOM");var e=window.history,a=(0,M.supportsGoWithoutReloadUsingHash)(),l=t.getUserConfirmation,u=void 0===l?M.getConfirmation:l,f=t.hashType,d=void 0===f?"slash":f,m=t.basename?(0,_.stripTrailingSlash)((0,_.addLeadingSlash)(t.basename)):"",p=s[d],v=p.encodePath,g=p.decodePath,b=function(){var t=g(c());return(0,o.default)(!m||(0,_.hasBasename)(t,m),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+m+'".'),m&&(t=(0,_.stripBasename)(t,m)),(0,x.createLocation)(t)},y=(0,r.default)(),w=function(t){n(U,t),U.length=e.length,y.notifyListeners(U.location,U.action)},P=!1,O=null,k=function(){var t=c(),e=v(t);if(t!==e)h(e);else{var n=b(),o=U.location;if(!P&&(0,x.locationsAreEqual)(o,n))return;if(O===(0,_.createPath)(n))return;O=null,E(n)}},E=function(t){P?(P=!1,w()):y.confirmTransitionTo(t,"POP",u,function(e){e?w({action:"POP",location:t}):L(t)})},L=function(t){var e=U.location,n=N.lastIndexOf((0,_.createPath)(e));-1===n&&(n=0);var o=N.lastIndexOf((0,_.createPath)(t));-1===o&&(o=0);var i=n-o;i&&(P=!0,j(i))},A=c(),C=v(A);A!==C&&h(C);var S=b(),N=[(0,_.createPath)(S)],j=function(t){(0,o.default)(a,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},H=0,R=function(t){1===(H+=t)?(0,M.addEventListener)(window,"hashchange",k):0===H&&(0,M.removeEventListener)(window,"hashchange",k)},T=!1,U={length:e.length,action:"POP",location:S,createHref:function(t){return"#"+v(m+(0,_.createPath)(t))},push:function(t,e){(0,o.default)(void 0===e,"Hash history cannot push state; it is ignored");var n=(0,x.createLocation)(t,void 0,void 0,U.location);y.confirmTransitionTo(n,"PUSH",u,function(t){if(t){var e=(0,_.createPath)(n),i=v(m+e);if(c()!==i){O=e,function(t){window.location.hash=t}(i);var r=N.lastIndexOf((0,_.createPath)(U.location)),a=N.slice(0,-1===r?0:r+1);a.push(e),N=a,w({action:"PUSH",location:n})}else(0,o.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),w()}})},replace:function(t,e){(0,o.default)(void 0===e,"Hash history cannot replace state; it is ignored");var n=(0,x.createLocation)(t,void 0,void 0,U.location);y.confirmTransitionTo(n,"REPLACE",u,function(t){if(t){var e=(0,_.createPath)(n),o=v(m+e);c()!==o&&(O=e,h(o));var i=N.indexOf((0,_.createPath)(U.location));-1!==i&&(N[i]=e),w({action:"REPLACE",location:n})}})},go:j,goBack:function(){return j(-1)},goForward:function(){return j(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=y.setPrompt(t);return T||(R(1),T=!0),function(){return T&&(T=!1,R(-1)),e()}},listen:function(t){var e=y.appendListener(t);return R(1),function(){R(-1),e()}}};return U}}))(),O="router-link-active",k={navigate:function(t,e){t&&t.preventDefault&&t.preventDefault(),e&&P.location.pathname!==e&&(this.get("replace")?P.replace(e):P.push(e))},setActivedClass:function(t){var e=t.pathname===this.get("to");this.set({active:e})}};function E(){this.get("event")()}function L(t){!function(t,e){t._observers={pre:n(),post:n()},t._handlers=n(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}(this,t),this._state=e({replace:!1,to:"/",basePath:"#",active:!1,class:"",activeClass:O,event:null},t.data),this._handlers.destroy=[E],this._slotted=t.slots||{};var o=function(){this.setActivedClass(P.location),this.set({event:P.listen(this.setActivedClass.bind(this))})}.bind(this);t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,o,i,r=t._slotted.default;function a(e){var n=t.get();t.navigate(e,n.to)}return{c:function(){n=document.createElement("a"),this.h()},h:function(){var t,r;n.href=o=""+e.basePath+e.to,n.className=i=e.class+" "+(e.active?e.activeClass:""),t="click",r=a,n.addEventListener(t,r,!1)},m:function(t,e){!function(t,e,n){e.insertBefore(t,n)}(n,t,e),r&&function(t,e){e.appendChild(t)}(r,n)},p:function(t,e){(t.basePath||t.to)&&o!==(o=""+e.basePath+e.to)&&(n.href=o),(t.class||t.active||t.activeClass)&&i!==(i=e.class+" "+(e.active?e.activeClass:""))&&(n.className=i)},u:function(){var t;(t=n).parentNode.removeChild(t),r&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(n,r)},d:function(){var t,e;t="click",e=a,n.removeEventListener(t,e,!1)}}}(this,this._state),this.root._oncreate.push(o),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),r(this._oncreate))}e(L.prototype,k,a);var A=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},C=function(t,e){return t.map(function(t){return null!==t.match(new RegExp(":"+e))?"("+e+")":t}).join("\\/")},S=function(t,e,n){var o={};return t.filter(function(t){return null!==t.match(new RegExp(":"+n))}).map(function(t){return t.match(new RegExp(":("+n+")"))[1]}).forEach(function(t,n){var i=n+1;o[t]=e[i]}),o},N=function(t,e,n,o){var i=t[e],r=i.Component,a=i.props;r||(r=t[e]);var s={data:{path:o}};return a=a||{},Object.prototype.hasOwnProperty.call(a,"data")&&(a.data.path=o,s={}),new r(A({target:n},a,s))},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,o=void 0,i=void 0,r=e.pathRegex?e.pathRegex:"[a-zA-Z0-9]+",a=e.defaultRoute?e.defaultRoute:"default",s=function(e){var o=!1;for(var s in i&&i.destroy(),t)if(Object.prototype.hasOwnProperty.call(t,s)){var c=s.split("/"),l=C(c,r),u=e.pathname.match(new RegExp("^"+l+"$"));if(null!==u){var h=S(c,u,r);i=N(t,s,n,h),o=!0;break}}!o&&t[a]&&(i=N(t,a,n,{}))};return{create:function(t){n="string"==typeof t?document.querySelector(t):t,o=P.listen(s),s(P.location)},destroy:function(){o&&(o(),o=void 0)}}};return j.push=function(t){P.push(t)},j.replace=function(t){P.replace(t)},j.go=function(t){P.go(t)},j.listen=function(t){P.listen(t)},{createRouter:j,RouterLink:L}}()}(b={exports:{}},b.exports),b.exports),w=(y=x)&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y;function M(t){h(t,"svelte-3775128793","")}function P(t,e){var r,c,l,u,h,f=e.res,d=(e.res_index,f.tags),m=f.loc&&E(t,e);return{c:function(){r=a("tr"),c=a("td"),m&&m.c(),l=s("\n            "),u=a("td"),h=s(d),this.h()},h:function(){M(c),M(u)},m:function(t,e){o(r,t,e),n(c,r),m&&m.m(c,null),n(l,r),n(u,r),n(h,u)},p:function(e,n){f=n.res,n.res_index,f.loc?m?m.p(e,n):((m=E(t,n)).c(),m.m(c,null)):m&&(m.u(),m.d(),m=null),e.shelves&&d!==(d=f.tags)&&(h.data=d)},u:function(){i(r),m&&m.u()},d:function(){m&&m.d()}}}function O(t,e){var r,c,l,u,h=e.res,f=e.loc,d=(e.res_index,e.idx),m=f.name,p=d!=[...e.locationMap.get(h.loc)].length-1&&k(t,e);return{c:function(){r=a("div"),c=a("a"),l=s(m),p&&p.c(),this.h()},h:function(){M(c),c.href=u="/#/shelf/"+f.link,r.className="shelflink"},m:function(t,e){o(r,t,e),n(c,r),n(l,c),p&&p.m(r,null)},p:function(e,n){h=n.res,f=n.loc,n.res_index,d=n.idx,(e.locationMap||e.shelves)&&m!==(m=f.name)&&(l.data=m),(e.locationMap||e.shelves)&&u!==(u="/#/shelf/"+f.link)&&(c.href=u),d!=[...n.locationMap.get(h.loc)].length-1?p||((p=k(t,n)).c(),p.m(r,null)):p&&(p.u(),p.d(),p=null)},u:function(){i(r),p&&p.u()},d:function(){p&&p.d()}}}function k(e,n){var r;n.res,n.loc,n.res_index,n.idx;return{c:function(){r=s(".")},m:function(t,e){o(r,t,e)},p:function(t,e){e.res,e.loc,e.res_index,e.idx},u:function(){i(r)},d:t}}function E(t,n){for(var a,s=n.res,l=(n.res_index,[...n.locationMap.get(s.loc)]),u=[],h=0;h<l.length;h+=1)u[h]=O(t,e({},n,{loc:l[h],idx:h}));return{c:function(){for(var t=0;t<u.length;t+=1)u[t].c();a=c()},m:function(t,e){for(var n=0;n<u.length;n+=1)u[n].m(t,e);o(a,t,e)},p:function(n,o){s=o.res,o.res_index;var i=[...o.locationMap.get(s.loc)];if(n.locationMap||n.shelves){for(var r=0;r<i.length;r+=1){var c=e({},o,{loc:i[r],idx:r});u[r]?u[r].p(n,c):(u[r]=O(t,c),u[r].c(),u[r].m(a.parentNode,a))}for(;r<u.length;r+=1)u[r].u(),u[r].d();u.length=i.length}},u:function(){for(var t=0;t<u.length;t+=1)u[t].u();i(a)},d:function(){r(u)}}}function L(t,n){for(var a,s=n.shelves.results,l=[],u=0;u<s.length;u+=1)l[u]=P(t,e({},n,{res:s[u],res_index:u}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();a=c()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(a,t,e)},p:function(n,o){var i=o.shelves.results;if(n.shelves||n.locationMap){for(var r=0;r<i.length;r+=1){var s=e({},o,{res:i[r],res_index:r});l[r]?l[r].p(n,s):(l[r]=P(t,s),l[r].c(),l[r].m(a.parentNode,a))}for(;r<l.length;r+=1)l[r].u(),l[r].d();l.length=i.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();i(a)},d:function(){r(l)}}}function A(t){var r,c,l,u,d,m,p,g;v(this,t),this._state=e({},t.data),this._fragment=(r=this,c=this._state,g=c.shelves.results&&L(r,c),{c:function(){l=a("div"),u=a("table"),(d=a("thead")).innerHTML="<tr><th svelte-3775128793>shelf</th><th svelte-3775128793>items</th></tr><tr></tr>",m=s("\n    "),p=a("tbody"),g&&g.c(),this.h()},h:function(){u.border="1",h(u,"cellspacing","0"),h(u,"cellpadding","3"),f(u,"max-width","250px")},m:function(t,e){o(l,t,e),n(u,l),n(d,u),n(m,u),n(p,u),g&&g.m(p,null)},p:function(t,e){e.shelves.results?g?g.p(t,e):((g=L(r,e)).c(),g.m(p,null)):g&&(g.u(),g.d(),g=null)},u:function(){i(l),g&&g.u()},d:function(){g&&g.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function C(t){h(t,"svelte-3408027156","")}function S(t,e){var r,c,l,u,h,d,m,p,v,g,_,b,y,x,w,M,P,O,k,E,L,A,S,N,j,R,T,U,I,$,B,q=e.res,D=(e.res_index,q.last_at.ago),W=q.item_id,z=q.data.callnumber,F=q.data.author,G=q.data.title,Z=q.last_at.ago,K=q.tags[0].temporary.loc&&H(t,e);return{c:function(){r=a("tr"),c=a("td"),l=a("abbr"),u=s(D),h=s(" ago"),m=s("\n            "),p=a("td"),K&&K.c(),v=s("\n            "),g=a("td"),_=a("a"),b=s(W),x=s("\n            "),w=a("td"),M=a("abbr"),P=s(z),k=s("\n            "),E=a("td"),L=a("abbr"),A=s(F),N=s("\n            "),j=a("td"),R=s(G),T=s("\n            "),U=a("td"),I=a("abbr"),$=s(Z),this.h()},h:function(){C(c),l.title=d=q.last_at.iso8601,f(c,"background-color","#a9fbaf"),C(p),C(g),C(_),_.href=y="/#/item/"+q.item_id,C(w),M.title=O=q.data.callnumber,C(E),f(L,"text-decoration","none"),L.title=S=q.data.author,C(j),C(U),I.title=B=q.last_at.iso8601},m:function(t,e){o(r,t,e),n(c,r),n(l,c),n(u,l),n(h,l),n(m,r),n(p,r),K&&K.m(p,null),n(v,r),n(g,r),n(_,g),n(b,_),n(x,r),n(w,r),n(M,w),n(P,M),n(k,r),n(E,r),n(L,E),n(A,L),n(N,r),n(j,r),n(R,j),n(T,r),n(U,r),n(I,U),n($,I)},p:function(e,n){q=n.res,n.res_index,e.shelf&&D!==(D=q.last_at.ago)&&(u.data=D),e.shelf&&d!==(d=q.last_at.iso8601)&&(l.title=d),q.tags[0].temporary.loc?K?K.p(e,n):((K=H(t,n)).c(),K.m(p,null)):K&&(K.u(),K.d(),K=null),e.shelf&&W!==(W=q.item_id)&&(b.data=W),e.shelf&&y!==(y="/#/item/"+q.item_id)&&(_.href=y),e.shelf&&z!==(z=q.data.callnumber)&&(P.data=z),e.shelf&&O!==(O=q.data.callnumber)&&(M.title=O),e.shelf&&F!==(F=q.data.author)&&(A.data=F),e.shelf&&S!==(S=q.data.author)&&(L.title=S),e.shelf&&G!==(G=q.data.title)&&(R.data=G),e.shelf&&Z!==(Z=q.last_at.ago)&&($.data=Z),e.shelf&&B!==(B=q.last_at.iso8601)&&(I.title=B)},u:function(){i(r),K&&K.u()},d:function(){K&&K.d()}}}function N(t,e){var r,c,l,u,h=e.res,f=e.loc,d=(e.res_index,e.idx),m=f.name,p=d!=[...e.locationMap.get(h.tags[0].temporary.loc)].length-1&&j(t,e);return{c:function(){r=a("div"),c=a("a"),l=s(m),p&&p.c(),this.h()},h:function(){C(c),c.href=u="/#/shelf/"+f.link,r.className="shelflink"},m:function(t,e){o(r,t,e),n(c,r),n(l,c),p&&p.m(r,null)},p:function(e,n){h=n.res,f=n.loc,n.res_index,d=n.idx,(e.locationMap||e.shelf)&&m!==(m=f.name)&&(l.data=m),(e.locationMap||e.shelf)&&u!==(u="/#/shelf/"+f.link)&&(c.href=u),d!=[...n.locationMap.get(h.tags[0].temporary.loc)].length-1?p||((p=j(t,n)).c(),p.m(r,null)):p&&(p.u(),p.d(),p=null)},u:function(){i(r),p&&p.u()},d:function(){p&&p.d()}}}function j(e,n){var r;n.res,n.loc,n.res_index,n.idx;return{c:function(){r=s(".")},m:function(t,e){o(r,t,e)},p:function(t,e){e.res,e.loc,e.res_index,e.idx},u:function(){i(r)},d:t}}function H(t,n){for(var a,s=n.res,l=(n.res_index,[...n.locationMap.get(s.tags[0].temporary.loc)]),u=[],h=0;h<l.length;h+=1)u[h]=N(t,e({},n,{loc:l[h],idx:h}));return{c:function(){for(var t=0;t<u.length;t+=1)u[t].c();a=c()},m:function(t,e){for(var n=0;n<u.length;n+=1)u[n].m(t,e);o(a,t,e)},p:function(n,o){s=o.res,o.res_index;var i=[...o.locationMap.get(s.tags[0].temporary.loc)];if(n.locationMap||n.shelf){for(var r=0;r<i.length;r+=1){var c=e({},o,{loc:i[r],idx:r});u[r]?u[r].p(n,c):(u[r]=N(t,c),u[r].c(),u[r].m(a.parentNode,a))}for(;r<u.length;r+=1)u[r].u(),u[r].d();u.length=i.length}},u:function(){for(var t=0;t<u.length;t+=1)u[t].u();i(a)},d:function(){r(u)}}}function R(t,n){for(var a,s=n.shelf.results,l=[],u=0;u<s.length;u+=1)l[u]=S(t,e({},n,{res:s[u],res_index:u}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();a=c()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(a,t,e)},p:function(n,o){var i=o.shelf.results;if(n.shelf||n.locationMap){for(var r=0;r<i.length;r+=1){var s=e({},o,{res:i[r],res_index:r});l[r]?l[r].p(n,s):(l[r]=S(t,s),l[r].c(),l[r].m(a.parentNode,a))}for(;r<l.length;r+=1)l[r].u(),l[r].d();l.length=i.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();i(a)},d:function(){r(l)}}}function T(t){var r,c,l,u,f,d,m,p;v(this,t),this._state=e({},t.data),this._fragment=(r=this,c=this._state,p=c.shelf.results&&R(r,c),{c:function(){l=a("div"),u=a("table"),(f=a("thead")).innerHTML='<tr><th svelte-3408027156>at</th><th svelte-3408027156>location</th><th svelte-3408027156>barcode</th><th svelte-3408027156>callnum</th><th svelte-3408027156 width="15%">author</th><th svelte-3408027156>title</th><th svelte-3408027156>last</th></tr>',d=s("\n    "),m=a("tbody"),p&&p.c(),this.h()},h:function(){u.border="1",h(u,"cellspacing","0"),h(u,"cellpadding","3")},m:function(t,e){o(l,t,e),n(u,l),n(f,u),n(d,u),n(m,u),p&&p.m(m,null)},p:function(t,e){e.shelf.results?p?p.p(t,e):((p=R(r,e)).c(),p.m(m,null)):p&&(p.u(),p.d(),p=null)},u:function(){i(l),p&&p.u()},d:function(){p&&p.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function U(t){h(t,"svelte-422554819","")}function I(t,e){var n,r,c,l,u=e.path.shelfId,h=new T({root:t.root,data:{shelf:e.shelf,locationMap:e.locationMap}});return{c:function(){n=s("Shelf: "),r=s(u),c=s("\n    "),l=a("div"),h._fragment.c(),this.h()},h:function(){U(l),l.className="shelf-content"},m:function(t,e){o(n,t,e),o(r,t,e),o(c,t,e),o(l,t,e),h._mount(l,null)},p:function(t,e){t.path&&u!==(u=e.path.shelfId)&&(r.data=u);var n={};t.shelf&&(n.shelf=e.shelf),t.locationMap&&(n.locationMap=e.locationMap),h._set(n)},u:function(){i(n),i(r),i(c),i(l)},d:function(){h.destroy(!1)}}}function $(t){v(this,t),this._state=e({shelves:{},shelf:{},locationMap:null},t.data);var r,c,l,u,h,f,d,m=function(){const t="http://spore.deichman.no/api";fetch(`${t}/shelves`).then(t=>t.json()).then(t=>new Promise(e=>{let n=new Map;for(const e of t.results){let t=new Set,o=e.loc.split(".");for(let e=0;e<o.length;e++)t.add({link:`${o.slice(0,e+1).join(".")}`,name:o[e]});n.set(e.loc,t)}e(this.set({locationMap:n,shelves:t}))})).then(()=>{const e=this.get("path");return e.shelfId?Promise.resolve(fetch(`${t}/shelf/${e.shelfId}`)):Promise.reject("No shelf id")}).then(t=>t.json()).then(t=>this.set({shelf:t})).catch(t=>{throw console.log(`something broke: ${t}`),t})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(r=this,c=this._state,f=new A({root:r.root,data:{shelves:c.shelves,locationMap:c.locationMap}}),d=c.path.shelfId&&I(r,c),{c:function(){l=a("div"),u=a("div"),f._fragment.c(),h=s("\n  "),d&&d.c(),this.h()},h:function(){U(l),U(u),u.className="shelf-list",l.className="container"},m:function(t,e){o(l,t,e),n(u,l),f._mount(u,null),n(h,l),d&&d.m(l,null)},p:function(t,e){var n={};t.shelves&&(n.shelves=e.shelves),t.locationMap&&(n.locationMap=e.locationMap),f._set(n),e.path.shelfId?d?d.p(t,e):((d=I(r,e)).c(),d.m(l,null)):d&&(d.u(),d.d(),d=null)},u:function(){i(l),d&&d.u()},d:function(){f.destroy(!1),d&&d.d()}}),this.root._oncreate.push(m),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function B(t){var e="",n="";return t.split(".").map(function(t){var o={sep:n,name:t,link:e=e+n+t};return n=".",o})}function q(e,r){var c,l,u,h,f=r.l,d=(r.l_index,f.sep),m=f.name;return{c:function(){c=s(d),l=a("a"),u=s(m),this.h()},h:function(){l.href=h="/#/shelf/"+f.link},m:function(t,e){o(c,t,e),o(l,t,e),n(u,l)},p:function(t,e){f=e.l,e.l_index,t.loc&&d!==(d=f.sep)&&(c.data=d),t.loc&&m!==(m=f.name)&&(u.data=m),t.loc&&h!==(h="/#/shelf/"+f.link)&&(l.href=h)},u:function(){i(c),i(l)},d:t}}function D(t,n){for(var a,s=B(n.loc),l=[],u=0;u<s.length;u+=1)l[u]=q(0,e({},n,{l:s[u],l_index:u}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();a=c()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);o(a,t,e)},p:function(t,n){var o=B(n.loc);if(t.loc){for(var i=0;i<o.length;i+=1){var r=e({},n,{l:o[i],l_index:i});l[i]?l[i].p(t,r):(l[i]=q(0,r),l[i].c(),l[i].m(a.parentNode,a))}for(;i<l.length;i+=1)l[i].u(),l[i].d();l.length=o.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();i(a)},d:function(){r(l)}}}function W(e,n){var r;return{c:function(){r=s("N/A")},m:function(t,e){o(r,t,e)},p:t,u:function(){i(r)},d:t}}function z(t){v(this,t),this._state=e({},t.data),this._fragment=function(t,e){var n;function r(t){return t.loc?D:W}var s=r(e),c=s(t,e);return{c:function(){n=a("div"),c.c()},m:function(t,e){o(n,t,e),c.m(n,null)},p:function(e,o){s===(s=r(o))&&c?c.p(e,o):(c.u(),c.d(),(c=s(t,o)).c(),c.m(n,null))},u:function(){i(n),c.u()},d:function(){c.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function F(t){h(t,"svelte-3891022760","")}function G(e,r){var c,l,u,h,f,d,m,p,v,g,_,b,y,x,w,M,P,O,k,E,L,A,C,S,N,j,H,R,T,U,I,$,B,q,D=r.item.response.meta.title,W=r.item.response.meta.author,z=r.item.response.meta.callnumber,G=r.item.item_id,Z=r.item.response.meta.biblionumber;return{c:function(){c=a("tr"),l=a("td"),u=a("img"),f=s("\n      "),d=a("tr"),m=a("th"),p=s(D),v=s("\n      "),g=a("tr"),(_=a("td")).textContent="author",b=a("td"),y=s(W),x=s("\n      "),w=a("tr"),(M=a("td")).textContent="cn",P=a("td"),O=s(z),k=s("\n      "),E=a("tr"),(L=a("td")).textContent="barcode",A=a("td"),C=a("a"),S=s(G),j=s("\n      "),H=a("tr"),(R=a("td")).textContent="bibnum",T=a("td"),U=s(Z),I=s(" ["),($=a("a")).textContent="Koha",q=s("]"),this.h()},h:function(){F(c),F(l),u.src=h="https://img.deichman.no/biblionumber/"+r.item.response.meta.biblionumber,l.colSpan="2",F(d),F(m),m.colSpan="2",F(g),F(_),F(b),F(w),F(M),F(P),F(E),F(L),F(A),C.href=N="/#/item/"+r.item.item_id,F(H),F(R),F(T),$.href=B="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+r.item.response.meta.biblionumber},m:function(t,e){o(c,t,e),n(l,c),n(u,l),n(f,c),o(d,t,e),n(m,d),n(p,m),o(v,t,e),o(g,t,e),n(_,g),n(b,g),n(y,b),o(x,t,e),o(w,t,e),n(M,w),n(P,w),n(O,P),o(k,t,e),o(E,t,e),n(L,E),n(A,E),n(C,A),n(S,C),o(j,t,e),o(H,t,e),n(R,H),n(T,H),n(U,T),n(I,T),n($,T),n(q,T)},p:function(t,e){t.item&&h!==(h="https://img.deichman.no/biblionumber/"+e.item.response.meta.biblionumber)&&(u.src=h),t.item&&D!==(D=e.item.response.meta.title)&&(p.data=D),t.item&&W!==(W=e.item.response.meta.author)&&(y.data=W),t.item&&z!==(z=e.item.response.meta.callnumber)&&(O.data=z),t.item&&G!==(G=e.item.item_id)&&(S.data=G),t.item&&N!==(N="/#/item/"+e.item.item_id)&&(C.href=N),t.item&&Z!==(Z=e.item.response.meta.biblionumber)&&(U.data=Z),t.item&&B!==(B="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+e.item.response.meta.biblionumber)&&($.href=B)},u:function(){i(c),i(d),i(v),i(g),i(x),i(w),i(k),i(E),i(j),i(H)},d:t}}function Z(t,e){var r,l,u,h,f,d,m,p,v,g=e.tag,_=(e.tag_index,g.rfid),b=g.permanent.at&&K(t,e),y=g.temporary.at&&V(t,e);return{c:function(){(r=a("tr")).innerHTML='<th svelte-3891022760 colspan="2">tag</th>',l=s("\n        "),u=a("tr"),(h=a("td")).textContent="rfid",f=a("td"),d=s(_),m=s("\n        "),b&&b.c(),p=s("\n        "),y&&y.c(),v=c(),this.h()},h:function(){F(r),F(u),F(h),F(f)},m:function(t,e){o(r,t,e),o(l,t,e),o(u,t,e),n(h,u),n(f,u),n(d,f),o(m,t,e),b&&b.m(t,e),o(p,t,e),y&&y.m(t,e),o(v,t,e)},p:function(e,n){g=n.tag,n.tag_index,e.item&&_!==(_=g.rfid)&&(d.data=_),g.permanent.at?b?b.p(e,n):((b=K(t,n)).c(),b.m(p.parentNode,p)):b&&(b.u(),b.d(),b=null),g.temporary.at?y?y.p(e,n):((y=V(t,n)).c(),y.m(v.parentNode,v)):y&&(y.u(),y.d(),y=null)},u:function(){i(r),i(l),i(u),i(m),b&&b.u(),i(p),y&&y.u(),i(v)},d:function(){b&&b.d(),y&&y.d()}}}function K(t,e){var r,c,l,u,h,f,d,m,p,v,g,_,b,y,x,w,M,P=e.tag,O=(e.tag_index,P.permanent.at.ago||P.permanent.at.iso8601),k=P.permanent.dev,E=new z({root:t.root,data:{loc:P.permanent.loc}});return{c:function(){r=a("tr"),(c=a("td")).textContent="perm",l=a("td"),E._fragment.c(),u=s("\n            "),h=a("tr"),(f=a("td")).textContent="at",d=a("td"),m=a("abbr"),p=s(O),g=s("\n            "),_=a("tr"),(b=a("td")).textContent="dev",y=a("td"),x=a("a"),w=s(k),this.h()},h:function(){F(r),F(c),F(l),F(h),F(f),F(d),m.title=v=P.permanent.at.iso8601,F(_),F(b),F(y),x.href=M="/#/dev/"+P.permanent.dev},m:function(t,e){o(r,t,e),n(c,r),n(l,r),E._mount(l,null),o(u,t,e),o(h,t,e),n(f,h),n(d,h),n(m,d),n(p,m),o(g,t,e),o(_,t,e),n(b,_),n(y,_),n(x,y),n(w,x)},p:function(t,e){P=e.tag,e.tag_index;var n={};t.item&&(n.loc=P.permanent.loc),E._set(n),t.item&&O!==(O=P.permanent.at.ago||P.permanent.at.iso8601)&&(p.data=O),t.item&&v!==(v=P.permanent.at.iso8601)&&(m.title=v),t.item&&k!==(k=P.permanent.dev)&&(w.data=k),t.item&&M!==(M="/#/dev/"+P.permanent.dev)&&(x.href=M)},u:function(){i(r),i(u),i(h),i(g),i(_)},d:function(){E.destroy(!1)}}}function V(t,e){var r,c,l,u,h,f,d,m,p,v,g,_,b,y,x,w,M,P=e.tag,O=(e.tag_index,P.temporary.at.ago||P.temporary.at.iso8601),k=P.temporary.dev,E=new z({root:t.root,data:{loc:P.temporary.loc}});return{c:function(){r=a("tr"),(c=a("td")).textContent="temp",l=a("td"),E._fragment.c(),u=s("\n            "),h=a("tr"),(f=a("td")).textContent="at",d=a("td"),m=a("abbr"),p=s(O),g=s("\n            "),_=a("tr"),(b=a("td")).textContent="dev",y=a("td"),x=a("a"),w=s(k),this.h()},h:function(){F(r),F(c),F(l),F(h),F(f),F(d),m.title=v=P.temporary.at.iso8601,F(_),F(b),F(y),x.href=M="/#/dev/"+P.temporary.dev},m:function(t,e){o(r,t,e),n(c,r),n(l,r),E._mount(l,null),o(u,t,e),o(h,t,e),n(f,h),n(d,h),n(m,d),n(p,m),o(g,t,e),o(_,t,e),n(b,_),n(y,_),n(x,y),n(w,x)},p:function(t,e){P=e.tag,e.tag_index;var n={};t.item&&(n.loc=P.temporary.loc),E._set(n),t.item&&O!==(O=P.temporary.at.ago||P.temporary.at.iso8601)&&(p.data=O),t.item&&v!==(v=P.temporary.at.iso8601)&&(m.title=v),t.item&&k!==(k=P.temporary.dev)&&(w.data=k),t.item&&M!==(M="/#/dev/"+P.temporary.dev)&&(x.href=M)},u:function(){i(r),i(u),i(h),i(g),i(_)},d:function(){E.destroy(!1)}}}function Y(t,c){for(var l,u,d=c.item.response&&c.item.response.meta&&G(0,c),m=c.item.response.tags,p=[],v=0;v<m.length;v+=1)p[v]=Z(t,e({},c,{tag:m[v],tag_index:v}));return{c:function(){l=a("table"),d&&d.c(),u=s("\n    \n      ");for(var t=0;t<p.length;t+=1)p[t].c();this.h()},h:function(){l.border="1",h(l,"cellspacing","0"),h(l,"cellpadding","3"),f(l,"max-width","250px")},m:function(t,e){o(l,t,e),d&&d.m(l,null),n(u,l);for(var i=0;i<p.length;i+=1)p[i].m(l,null)},p:function(n,o){o.item.response&&o.item.response.meta?d?d.p(n,o):((d=G(0,o)).c(),d.m(l,u)):d&&(d.u(),d.d(),d=null);var i=o.item.response.tags;if(n.item){for(var r=0;r<i.length;r+=1){var a=e({},o,{tag:i[r],tag_index:r});p[r]?p[r].p(n,a):(p[r]=Z(t,a),p[r].c(),p[r].m(l,null))}for(;r<p.length;r+=1)p[r].u(),p[r].d();p.length=i.length}},u:function(){i(l),d&&d.u();for(var t=0;t<p.length;t+=1)p[t].u()},d:function(){d&&d.d(),r(p)}}}function J(t){var n,r,s,c;v(this,t),this._state=e({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(n=this,r=this._state,c=r.item&&Y(n,r),{c:function(){s=a("div"),c&&c.c()},m:function(t,e){o(s,t,e),c&&c.m(s,null)},p:function(t,e){e.item?c?c.p(t,e):((c=Y(n,e)).c(),c.m(s,null)):c&&(c.u(),c.d(),c=null)},u:function(){i(s),c&&c.u()},d:function(){c&&c.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}e(A.prototype,_),e(T.prototype,_),e($.prototype,_),e(z.prototype,_),e(J.prototype,_);var Q={handleSubmit(t){t.preventDefault(),console.log(t)}};function X(t){h(t,"svelte-3408027156","")}function tt(t,e){var r,c,f,d,m,p,v=e.item.response.meta.title;function g(e){t.handleSubmit(e)}return{c:function(){r=a("h1"),c=s(v),f=s("\n      "),(d=a("form")).innerHTML='<label for="code">Barcode:</label>\n      <input id="code" name="code" class="ui-autocomplete-input" autocomplete="off">',m=s("\n      "),p=a("hr"),this.h()},h:function(){l(d,"submit",g),h(p,"size","1")},m:function(t,e){o(r,t,e),n(c,r),o(f,t,e),o(d,t,e),o(m,t,e),o(p,t,e)},p:function(t,e){t.item&&v!==(v=e.item.response.meta.title)&&(c.data=v)},u:function(){i(r),i(f),i(d),i(m),i(p)},d:function(){u(d,"submit",g)}}}function et(t,c){for(var l,u,h,f,d,m,p,v,g,_,b,y,x,w=c.it,M=(c.it_index,w.at.ago||w.at.iso8601),P=w.rfid||"N/A",O=new z({root:t.root,data:{loc:w.location}}),k=w.actions,E=[],L=0;L<k.length;L+=1)E[L]=nt(t,e({},c,{action:k[L],action_index:L}));return{c:function(){l=a("tr"),u=a("td"),h=a("abbr"),f=s(M),m=s("\n            "),p=a("td"),O._fragment.c(),v=s("\n            "),g=a("td");for(var t=0;t<E.length;t+=1)E[t].c();_=a("td"),b=a("abbr"),y=s(P),this.h()},h:function(){X(u),h.title=d=w.at.iso8601,X(p),X(g),X(_),b.title=x=w.dev||"N/A"},m:function(t,e){o(l,t,e),n(u,l),n(h,u),n(f,h),n(m,l),n(p,l),O._mount(p,null),n(v,l),n(g,l);for(var i=0;i<E.length;i+=1)E[i].m(g,null);n(_,l),n(b,_),n(y,b)},p:function(n,o){w=o.it,o.it_index,n.item&&M!==(M=w.at.ago||w.at.iso8601)&&(f.data=M),n.item&&d!==(d=w.at.iso8601)&&(h.title=d);var i={};n.item&&(i.loc=w.location),O._set(i);var r=w.actions;if(n.item){for(var a=0;a<r.length;a+=1){var s=e({},o,{action:r[a],action_index:a});E[a]?E[a].p(n,s):(E[a]=nt(t,s),E[a].c(),E[a].m(g,null))}for(;a<E.length;a+=1)E[a].u(),E[a].d();E.length=r.length}n.item&&P!==(P=w.rfid||"N/A")&&(y.data=P),n.item&&x!==(x=w.dev||"N/A")&&(b.title=x)},u:function(){i(l);for(var t=0;t<E.length;t+=1)E[t].u()},d:function(){O.destroy(!1),r(E)}}}function nt(e,r){r.it;var c,l,u=r.action,h=(r.it_index,r.action_index,u);return{c:function(){c=a("div"),l=s(h)},m:function(t,e){o(c,t,e),n(l,c)},p:function(t,e){e.it,u=e.action,e.it_index,e.action_index,t.item&&h!==(h=u)&&(l.data=h)},u:function(){i(c)},d:t}}function ot(t,c){for(var l,u,d,m,p,v=c.item.response.meta&&tt(t,c),g=c.item.response.history,_=[],b=0;b<g.length;b+=1)_[b]=et(t,e({},c,{it:g[b],it_index:b}));return{c:function(){v&&v.c(),l=s("\n    "),u=a("table"),(d=a("thead")).innerHTML="<tr><th svelte-3408027156>at</th><th svelte-3408027156>shelf</th><th svelte-3408027156>type</th><th svelte-3408027156>rfid</th></tr>",m=s("\n      "),p=a("tbody");for(var t=0;t<_.length;t+=1)_[t].c();this.h()},h:function(){u.border="1",h(u,"cellspacing","0"),h(u,"cellpadding","3"),f(u,"max-width","250px")},m:function(t,e){v&&v.m(t,e),o(l,t,e),o(u,t,e),n(d,u),n(m,u),n(p,u);for(var i=0;i<_.length;i+=1)_[i].m(p,null)},p:function(n,o){o.item.response.meta?v?v.p(n,o):((v=tt(t,o)).c(),v.m(l.parentNode,l)):v&&(v.u(),v.d(),v=null);var i=o.item.response.history;if(n.item){for(var r=0;r<i.length;r+=1){var a=e({},o,{it:i[r],it_index:r});_[r]?_[r].p(n,a):(_[r]=et(t,a),_[r].c(),_[r].m(p,null))}for(;r<_.length;r+=1)_[r].u(),_[r].d();_.length=i.length}},u:function(){v&&v.u(),i(l),i(u);for(var t=0;t<_.length;t+=1)_[t].u()},d:function(){v&&v.d(),r(_)}}}function it(t){var n,r,s,c;v(this,t),this._state=e({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(n=this,r=this._state,c=r.item&&r.item.response&&ot(n,r),{c:function(){s=a("div"),c&&c.c()},m:function(t,e){o(s,t,e),c&&c.m(s,null)},p:function(t,e){e.item&&e.item.response?c?c.p(t,e):((c=ot(n,e)).c(),c.m(s,null)):c&&(c.u(),c.d(),c=null)},u:function(){i(s),c&&c.u()},d:function(){c&&c.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}e(it.prototype,Q,_);const{createRouter:rt}=w;var at={goHome(){rt.replace("/")}};function st(t){h(t,"svelte-993550016","")}function ct(t){v(this,t),this._state=e({item:null,locationMap:null},t.data);var r,c,l,u,h,f,d,m,p=function(){const t="http://spore.deichman.no/api";fetch(`${t}/shelves`).then(t=>t.json()).then(t=>new Promise(e=>{let n=new Map;for(const e of t.results){let t=new Set,o=e.loc.split(".");for(let e=0;e<o.length;e++)t.add({link:`${o.slice(0,e+1).join(".")}`,name:o[e]});n.set(e.loc,t)}e(this.set({locationMap:n}))})).then(()=>{const e=this.get("path");return e.barcode?Promise.resolve(fetch(`${t}/item/NO:02030000/${e.barcode}`)):Promise.reject("No shelf id")}).then(t=>t.json()).then(t=>(console.log(t),this.set({item:t}))).catch(t=>{throw console.log(`something broke: ${t}`),t})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(r=this,c=this._state,d=new J({root:r.root,data:{item:c.item,locationMap:c.locationMap}}),m=new it({root:r.root,data:{barcode:c.path.barcode,item:c.item,locationMap:c.locationMap}}),{c:function(){l=a("div"),u=a("div"),d._fragment.c(),h=s("\n  "),f=a("div"),m._fragment.c(),this.h()},h:function(){st(l),st(u),u.className="item-info",st(f),f.className="history",l.className="container"},m:function(t,e){o(l,t,e),n(u,l),d._mount(u,null),n(h,l),n(f,l),m._mount(f,null)},p:function(t,e){var n={};t.item&&(n.item=e.item),t.locationMap&&(n.locationMap=e.locationMap),d._set(n);var o={};t.path&&(o.barcode=e.path.barcode),t.item&&(o.item=e.item),t.locationMap&&(o.locationMap=e.locationMap),m._set(o)},u:function(){i(l)},d:function(){d.destroy(!1),m.destroy(!1)}}),this.root._oncreate.push(p),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}e(ct.prototype,at,_);const{createRouter:lt}=w;var ut={goHome(){lt.replace("/")}};function ht(n){v(this,n),this._state=e({},n.data),this._fragment=function(e,n){var r,c,h;function f(t){e.goHome()}return{c:function(){(r=a("h1")).textContent="404 Not Found",c=s("\n"),(h=a("button")).textContent="Go Home",this.h()},h:function(){l(h,"click",f)},m:function(t,e){o(r,t,e),o(c,t,e),o(h,t,e)},p:t,u:function(){i(r),i(c),i(h)},d:function(){u(h,"click",f)}}}(this,this._state),n.target&&(this._fragment.c(),this._fragment.m(n.target,n.anchor||null))}e(ht.prototype,ut,_);const{createRouter:ft,RouterLink:dt}=w,mt=ft({"/":$,"/shelf":$,"/shelf/:shelfId":$,"/item/:barcode":{Component:ct,props:{data:{salutation:"Hello"}}}},{pathRegex:"[a-zA-Z0-9.]+",defaultRoute:ht});function pt(){mt.destroy()}function vt(e,r){var c,l,u,h,f=new dt({root:e.root,slots:{default:document.createDocumentFragment()},data:{to:"/shelf"}});return{c:function(){c=a("div"),l=s("Shelf"),f._fragment.c(),u=s("\n  "),h=a("div"),this.h()},h:function(){h.id="app"},m:function(t,e){o(c,t,e),n(l,f._slotted.default),f._mount(c,null),n(u,c),n(h,c)},p:t,u:function(){i(c)},d:function(){f.destroy(!1)}}}function gt(t){v(this,t),this._state=e({},t.data),this._handlers.destroy=[pt];var n=function(){mt.create("#app")}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=vt(this,this._state),this.root._oncreate.push(n),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}return ft.listen(()=>{console.log("router changed")}),e(gt.prototype,_),new gt({target:document.body,data:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
