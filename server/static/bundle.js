var app=function(){"use strict";function t(){}function e(t){for(var e,n,r=1,o=arguments.length;r<o;r++)for(e in n=arguments[r])t[e]=n[e];return t}function n(t,e){e.appendChild(t)}function r(t,e,n){e.insertBefore(t,n)}function o(t){t.parentNode.removeChild(t)}function i(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}function a(){return document.createDocumentFragment()}function s(t){return document.createElement(t)}function c(t){return document.createTextNode(t)}function u(){return document.createComment("")}function l(t,e,n){t.addEventListener(e,n,!1)}function h(t,e,n){t.removeEventListener(e,n,!1)}function f(t,e,n){t.setAttribute(e,n)}function d(t,e,n){t.style.setProperty(e,n)}function m(){return Object.create(null)}function p(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function v(t,e,n,r,o){for(var i in e)if(n[i]){var a=r[i],s=o[i],c=e[i];if(c)for(var u=0;u<c.length;u+=1){var l=c[u];l.__calling||(l.__calling=!0,l.call(t,a,s),l.__calling=!1)}}}function _(t,e){t._observers={pre:m(),post:m()},t._handlers=m(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function g(t){for(;t&&t.length;)t.shift()()}var b={destroy:p,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,e)},observe:function(t,e,n){var r=n&&n.defer?this._observers.post:this._observers.pre;return(r[t]||(r[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=r[t].indexOf(e);~n&&r[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,g(this.root._beforecreate),g(this.root._oncreate),g(this.root._aftercreate),this.root._lock=!1)},teardown:p,_recompute:t,_set:function(t){var n=this._state,r={},o=!1;for(var i in t)this._differs(t[i],n[i])&&(r[i]=o=!0);o&&(this._state=e({},n,t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(v(this,this._observers.pre,r,this._state,n),this._fragment.p(r,this._state),v(this,this._observers.post,r,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var y,w,x=(function(t,e){t.exports=function(){function t(){}function e(t){for(var e,n,r=1,o=arguments.length;r<o;r++)for(e in n=arguments[r])t[e]=n[e];return t}function n(){return Object.create(null)}function r(e){this.destroy=t,this.fire("destroy"),this.set=this.get=t,!1!==e&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function o(t,e,n,r,o){for(var i in e)if(n[i]){var a=r[i],s=o[i],c=e[i];if(c)for(var u=0;u<c.length;u+=1){var l=c[u];l.__calling||(l.__calling=!0,l.call(t,a,s),l.__calling=!1)}}}function i(t){for(;t&&t.length;)t.shift()()}var a={destroy:r,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var r=0;r<n.length;r+=1)n[r].call(this,e)},observe:function(t,e,n){var r=n&&n.defer?this._observers.post:this._observers.pre;return(r[t]||(r[t]=[])).push(e),n&&!1===n.init||(e.__calling=!0,e.call(this,this._state[t]),e.__calling=!1),{cancel:function(){var n=r[t].indexOf(e);~n&&r[t].splice(n,1)}}},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(e({},t)),this.root._lock||(this.root._lock=!0,i(this.root._beforecreate),i(this.root._oncreate),i(this.root._aftercreate),this.root._lock=!1)},teardown:r,_recompute:t,_set:function(t){var n=this._state,r={},i=!1;for(var a in t)this._differs(t[a],n[a])&&(r[a]=i=!0);i&&(this._state=e({},n,t),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(o(this,this._observers.pre,r,this._state,n),this._fragment.p(r,this._state),o(this,this._observers.post,r,this._state,n)))},_mount:function(t,e){this._fragment.m(t,e)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function c(t,e){return t(e={exports:{}},e.exports),e.exports}var u=function(t,e,n){var r=arguments.length;n=new Array(r>2?r-2:0);for(var o=2;o<r;o++)n[o-2]=arguments[o];if(void 0===e)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(e.length<10||/^[s\W]*$/.test(e))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+e);if(!t){var i=0,a="Warning: "+e.replace(/%s/g,function(){return n[i++]});"undefined"!=typeof console&&console.error(a);try{throw new Error(a)}catch(t){}}},l=function(t,e,n,r,o,i,a,s){if(void 0===e)throw new Error("invariant requires an error message argument");if(!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,o,i,a,s],l=0;(c=new Error(e.replace(/%s/g,function(){return u[l++]}))).name="Invariant Violation"}throw c.framesToPop=1,c}};function h(t){return"/"===t.charAt(0)}function f(t,e){for(var n=e,r=n+1,o=t.length;r<o;n+=1,r+=1)t[n]=t[r];t.pop()}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],r=e&&e.split("/")||[],o=t&&h(t),i=e&&h(e),a=o||i;if(t&&h(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var s=void 0;if(r.length){var c=r[r.length-1];s="."===c||".."===c||""===c}else s=!1;for(var u=0,l=r.length;l>=0;l--){var d=r[l];"."===d?f(r,l):".."===d?(f(r,l),u++):u&&(f(r,l),u--)}if(!a)for(;u--;u)r.unshift("..");!a||""===r[0]||r[0]&&h(r[0])||r.unshift("");var m=r.join("/");return s&&"/"!==m.substr(-1)&&(m+="/"),m}var m=Object.freeze({default:d}),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function v(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(t,n){return v(t,e[n])});var n=void 0===t?"undefined":p(t);if(n!==(void 0===e?"undefined":p(e)))return!1;if("object"===n){var r=t.valueOf(),o=e.valueOf();if(r!==t||o!==e)return v(r,o);var i=Object.keys(t),a=Object.keys(e);return i.length===a.length&&i.every(function(n){return v(t[n],e[n])})}return!1}var _=Object.freeze({default:v}),g=c(function(t,e){e.__esModule=!0,e.addLeadingSlash=function(t){return"/"===t.charAt(0)?t:"/"+t},e.stripLeadingSlash=function(t){return"/"===t.charAt(0)?t.substr(1):t};var n=e.hasBasename=function(t,e){return new RegExp("^"+e+"(\\/|\\?|#|$)","i").test(t)};e.stripBasename=function(t,e){return n(t,e)?t.substr(e.length):t},e.stripTrailingSlash=function(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t},e.parsePath=function(t){var e=t||"/",n="",r="",o=e.indexOf("#");-1!==o&&(r=e.substr(o),e=e.substr(0,o));var i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}},e.createPath=function(t){var e=t.pathname,n=t.search,r=t.hash,o=e||"/";return n&&"?"!==n&&(o+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(o+="#"===r.charAt(0)?r:"#"+r),o}});s(g),g.addLeadingSlash,g.stripLeadingSlash,g.hasBasename,g.stripBasename,g.stripTrailingSlash,g.parsePath,g.createPath;var b=m&&d||m,y=_&&v||_,w=c(function(t,e){e.__esModule=!0,e.locationsAreEqual=e.createLocation=void 0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=i(b),o=i(y);function i(t){return t&&t.__esModule?t:{default:t}}e.createLocation=function(t,e,o,i){var a=void 0;"string"==typeof t?(a=(0,g.parsePath)(t)).state=e:(void 0===(a=n({},t)).pathname&&(a.pathname=""),a.search?"?"!==a.search.charAt(0)&&(a.search="?"+a.search):a.search="",a.hash?"#"!==a.hash.charAt(0)&&(a.hash="#"+a.hash):a.hash="",void 0!==e&&void 0===a.state&&(a.state=e));try{a.pathname=decodeURI(a.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+a.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return o&&(a.key=o),i?a.pathname?"/"!==a.pathname.charAt(0)&&(a.pathname=(0,r.default)(a.pathname,i.pathname)):a.pathname=i.pathname:a.pathname||(a.pathname="/"),a},e.locationsAreEqual=function(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&(0,o.default)(t.state,e.state)}});s(w),w.locationsAreEqual,w.createLocation;var x=c(function(t,e){e.__esModule=!0;var n,r=(n=u)&&n.__esModule?n:{default:n};e.default=function(){var t=null,e=[];return{setPrompt:function(e){return(0,r.default)(null==t,"A history supports only one prompt at a time"),t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,o,i){if(null!=t){var a="function"==typeof t?t(e,n):t;"string"==typeof a?"function"==typeof o?o(a,i):((0,r.default)(!1,"A history needs a getUserConfirmation function in order to use a prompt message"),i(!0)):i(!1!==a)}else i(!0)},appendListener:function(t){var n=!0,r=function(){n&&t.apply(void 0,arguments)};return e.push(r),function(){n=!1,e=e.filter(function(t){return t!==r})}},notifyListeners:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}}});s(x);var P=c(function(t,e){e.__esModule=!0,e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.addEventListener=function(t,e,n){return t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent("on"+e,n)},e.removeEventListener=function(t,e,n){return t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent("on"+e,n)},e.getConfirmation=function(t,e){return e(window.confirm(t))},e.supportsHistory=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history},e.supportsPopStateOnHashChange=function(){return-1===window.navigator.userAgent.indexOf("Trident")},e.supportsGoWithoutReloadUsingHash=function(){return-1===window.navigator.userAgent.indexOf("Firefox")},e.isExtraneousPopstateEvent=function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")}});s(P),P.canUseDOM,P.addEventListener,P.removeEventListener,P.getConfirmation,P.supportsHistory,P.supportsPopStateOnHashChange,P.supportsGoWithoutReloadUsingHash,P.isExtraneousPopstateEvent;var O=s(c(function(t,e){e.__esModule=!0;var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r=a(u),o=a(l),i=a(x);function a(t){return t&&t.__esModule?t:{default:t}}var s={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+(0,g.stripLeadingSlash)(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:g.stripLeadingSlash,decodePath:g.addLeadingSlash},slash:{encodePath:g.addLeadingSlash,decodePath:g.addLeadingSlash}},c=function(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)},h=function(t){var e=window.location.href.indexOf("#");window.location.replace(window.location.href.slice(0,e>=0?e:0)+"#"+t)};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,o.default)(P.canUseDOM,"Hash history needs a DOM");var e=window.history,a=(0,P.supportsGoWithoutReloadUsingHash)(),u=t.getUserConfirmation,l=void 0===u?P.getConfirmation:u,f=t.hashType,d=void 0===f?"slash":f,m=t.basename?(0,g.stripTrailingSlash)((0,g.addLeadingSlash)(t.basename)):"",p=s[d],v=p.encodePath,_=p.decodePath,b=function(){var t=_(c());return(0,r.default)(!m||(0,g.hasBasename)(t,m),'You are attempting to use a basename on a page whose URL path does not begin with the basename. Expected path "'+t+'" to begin with "'+m+'".'),m&&(t=(0,g.stripBasename)(t,m)),(0,w.createLocation)(t)},y=(0,i.default)(),x=function(t){n(q,t),q.length=e.length,y.notifyListeners(q.location,q.action)},O=!1,A=null,E=function(){var t=c(),e=v(t);if(t!==e)h(e);else{var n=b(),r=q.location;if(!O&&(0,w.locationsAreEqual)(r,n))return;if(A===(0,g.createPath)(n))return;A=null,M(n)}},M=function(t){O?(O=!1,x()):y.confirmTransitionTo(t,"POP",l,function(e){e?x({action:"POP",location:t}):k(t)})},k=function(t){var e=q.location,n=N.lastIndexOf((0,g.createPath)(e));-1===n&&(n=0);var r=N.lastIndexOf((0,g.createPath)(t));-1===r&&(r=0);var o=n-r;o&&(O=!0,j(o))},L=c(),C=v(L);L!==C&&h(C);var S=b(),N=[(0,g.createPath)(S)],j=function(t){(0,r.default)(a,"Hash history go(n) causes a full page reload in this browser"),e.go(t)},H=0,R=function(t){1===(H+=t)?(0,P.addEventListener)(window,"hashchange",E):0===H&&(0,P.removeEventListener)(window,"hashchange",E)},T=!1,q={length:e.length,action:"POP",location:S,createHref:function(t){return"#"+v(m+(0,g.createPath)(t))},push:function(t,e){(0,r.default)(void 0===e,"Hash history cannot push state; it is ignored");var n=(0,w.createLocation)(t,void 0,void 0,q.location);y.confirmTransitionTo(n,"PUSH",l,function(t){if(t){var e=(0,g.createPath)(n),o=v(m+e);if(c()!==o){A=e,function(t){window.location.hash=t}(o);var i=N.lastIndexOf((0,g.createPath)(q.location)),a=N.slice(0,-1===i?0:i+1);a.push(e),N=a,x({action:"PUSH",location:n})}else(0,r.default)(!1,"Hash history cannot PUSH the same path; a new entry will not be added to the history stack"),x()}})},replace:function(t,e){(0,r.default)(void 0===e,"Hash history cannot replace state; it is ignored");var n=(0,w.createLocation)(t,void 0,void 0,q.location);y.confirmTransitionTo(n,"REPLACE",l,function(t){if(t){var e=(0,g.createPath)(n),r=v(m+e);c()!==r&&(A=e,h(r));var o=N.indexOf((0,g.createPath)(q.location));-1!==o&&(N[o]=e),x({action:"REPLACE",location:n})}})},go:j,goBack:function(){return j(-1)},goForward:function(){return j(1)},block:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=y.setPrompt(t);return T||(R(1),T=!0),function(){return T&&(T=!1,R(-1)),e()}},listen:function(t){var e=y.appendListener(t);return R(1),function(){R(-1),e()}}};return q}}))(),A="router-link-active",E={navigate:function(t,e){t&&t.preventDefault&&t.preventDefault(),e&&O.location.pathname!==e&&(this.get("replace")?O.replace(e):O.push(e))},setActivedClass:function(t){var e=t.pathname===this.get("to");this.set({active:e})}};function M(){this.get("event")()}function k(t){!function(t,e){t._observers={pre:n(),post:n()},t._handlers=n(),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}(this,t),this._state=e({replace:!1,to:"/",basePath:"#",active:!1,class:"",activeClass:A,event:null},t.data),this._handlers.destroy=[M],this._slotted=t.slots||{};var r=function(){this.setActivedClass(O.location),this.set({event:O.listen(this.setActivedClass.bind(this))})}.bind(this);t.root||(this._oncreate=[]),this.slots={},this._fragment=function(t,e){var n,r,o,i=t._slotted.default;function a(e){var n=t.get();t.navigate(e,n.to)}return{c:function(){n=document.createElement("a"),this.h()},h:function(){var t,i;n.href=r=""+e.basePath+e.to,n.className=o=e.class+" "+(e.active?e.activeClass:""),t="click",i=a,n.addEventListener(t,i,!1)},m:function(t,e){!function(t,e,n){e.insertBefore(t,n)}(n,t,e),i&&function(t,e){e.appendChild(t)}(i,n)},p:function(t,e){(t.basePath||t.to)&&r!==(r=""+e.basePath+e.to)&&(n.href=r),(t.class||t.active||t.activeClass)&&o!==(o=e.class+" "+(e.active?e.activeClass:""))&&(n.className=o)},u:function(){var t;(t=n).parentNode.removeChild(t),i&&function(t,e){for(;t.firstChild;)e.appendChild(t.firstChild)}(n,i)},d:function(){var t,e;t="click",e=a,n.removeEventListener(t,e,!1)}}}(this,this._state),this.root._oncreate.push(r),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),i(this._oncreate))}e(k.prototype,E,a);var L=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},C=function(t,e){return t.map(function(t){return null!==t.match(new RegExp(":"+e))?"("+e+")":t}).join("\\/")},S=function(t,e,n){var r={};return t.filter(function(t){return null!==t.match(new RegExp(":"+n))}).map(function(t){return t.match(new RegExp(":("+n+")"))[1]}).forEach(function(t,n){var o=n+1;r[t]=e[o]}),r},N=function(t,e,n,r){var o=t[e],i=o.Component,a=o.props;i||(i=t[e]);var s={data:{path:r}};return a=a||{},Object.prototype.hasOwnProperty.call(a,"data")&&(a.data.path=r,s={}),new i(L({target:n},a,s))},j=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=void 0,r=void 0,o=void 0,i=e.pathRegex?e.pathRegex:"[a-zA-Z0-9]+",a=e.defaultRoute?e.defaultRoute:"default",s=function(e){var r=!1;for(var s in o&&o.destroy(),t)if(Object.prototype.hasOwnProperty.call(t,s)){var c=s.split("/"),u=C(c,i),l=e.pathname.match(new RegExp("^"+u+"$"));if(null!==l){var h=S(c,l,i);o=N(t,s,n,h),r=!0;break}}!r&&t[a]&&(o=N(t,a,n,{}))};return{create:function(t){n="string"==typeof t?document.querySelector(t):t,r=O.listen(s),s(O.location)},destroy:function(){r&&(r(),r=void 0)}}};return j.push=function(t){O.push(t)},j.replace=function(t){O.replace(t)},j.go=function(t){O.go(t)},j.listen=function(t){O.listen(t)},{createRouter:j,RouterLink:k}}()}(y={exports:{}},y.exports),y.exports),P=(w=x)&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w;function O(t){var e="",n="";return t.split(".").map(function(t){var r={sep:n,name:t,link:e=e+n+t};return n=".",r})}function A(e,i){var a,u,l,h,f=i.l,d=(i.l_index,f.sep),m=f.name;return{c:function(){a=c(d),u=s("a"),l=c(m),this.h()},h:function(){u.href=h="/#/shelf/"+f.link},m:function(t,e){r(a,t,e),r(u,t,e),n(l,u)},p:function(t,e){f=e.l,e.l_index,t.loc&&d!==(d=f.sep)&&(a.data=d),t.loc&&m!==(m=f.name)&&(l.data=m),t.loc&&h!==(h="/#/shelf/"+f.link)&&(u.href=h)},u:function(){o(a),o(u)},d:t}}function E(t,n){for(var a,s=O(n.loc),c=[],l=0;l<s.length;l+=1)c[l]=A(0,e({},n,{l:s[l],l_index:l}));return{c:function(){for(var t=0;t<c.length;t+=1)c[t].c();a=u()},m:function(t,e){for(var n=0;n<c.length;n+=1)c[n].m(t,e);r(a,t,e)},p:function(t,n){var r=O(n.loc);if(t.loc){for(var o=0;o<r.length;o+=1){var i=e({},n,{l:r[o],l_index:o});c[o]?c[o].p(t,i):(c[o]=A(0,i),c[o].c(),c[o].m(a.parentNode,a))}for(;o<c.length;o+=1)c[o].u(),c[o].d();c.length=r.length}},u:function(){for(var t=0;t<c.length;t+=1)c[t].u();o(a)},d:function(){i(c)}}}function M(e,n){var i;return{c:function(){i=c("N/A")},m:function(t,e){r(i,t,e)},p:t,u:function(){o(i)},d:t}}function k(t){_(this,t),this._state=e({},t.data),this._fragment=function(t,e){var n;function i(t){return t.loc?E:M}var a=i(e),c=a(t,e);return{c:function(){n=s("div"),c.c()},m:function(t,e){r(n,t,e),c.m(n,null)},p:function(e,r){a===(a=i(r))&&c?c.p(e,r):(c.u(),c.d(),(c=a(t,r)).c(),c.m(n,null))},u:function(){o(n),c.u()},d:function(){c.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null))}function L(t){f(t,"svelte-3775128793","")}function C(t,e){var n,i=e.res,a=(e.res_index,i.loc&&S(t,e));return{c:function(){a&&a.c(),n=u()},m:function(t,e){a&&a.m(t,e),r(n,t,e)},p:function(e,r){i=r.res,r.res_index,i.loc?a?a.p(e,r):((a=S(t,r)).c(),a.m(n.parentNode,n)):a&&(a.u(),a.d(),a=null)},u:function(){a&&a.u(),o(n)},d:function(){a&&a.d()}}}function S(t,e){var i,u,l,h,f,d=e.res,m=(e.res_index,d.tags),p=new k({root:t.root,slots:{default:a()},data:{loc:d.loc}});return{c:function(){i=s("tr"),u=s("td"),p._fragment.c(),l=c("\n            "),h=s("td"),f=c(m),this.h()},h:function(){L(u),L(h)},m:function(t,e){r(i,t,e),n(u,i),p._mount(u,null),n(l,i),n(h,i),n(f,h)},p:function(t,e){d=e.res,e.res_index;var n={};t.shelves&&(n.loc=d.loc),p._set(n),t.shelves&&m!==(m=d.tags)&&(f.data=m)},u:function(){o(i)},d:function(){p.destroy(!1)}}}function N(t,n){for(var a,s=n.shelves.results,c=[],l=0;l<s.length;l+=1)c[l]=C(t,e({},n,{res:s[l],res_index:l}));return{c:function(){for(var t=0;t<c.length;t+=1)c[t].c();a=u()},m:function(t,e){for(var n=0;n<c.length;n+=1)c[n].m(t,e);r(a,t,e)},p:function(n,r){var o=r.shelves.results;if(n.shelves){for(var i=0;i<o.length;i+=1){var s=e({},r,{res:o[i],res_index:i});c[i]?c[i].p(n,s):(c[i]=C(t,s),c[i].c(),c[i].m(a.parentNode,a))}for(;i<c.length;i+=1)c[i].u(),c[i].d();c.length=o.length}},u:function(){for(var t=0;t<c.length;t+=1)c[t].u();o(a)},d:function(){i(c)}}}function j(t){var i,a,u,l,h,m,p,v;_(this,t),this._state=e({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(i=this,a=this._state,v=a.shelves.results&&N(i,a),{c:function(){u=s("div"),l=s("table"),(h=s("thead")).innerHTML="<tr><th svelte-3775128793>shelf</th><th svelte-3775128793>items</th></tr><tr></tr>",m=c("\n    "),p=s("tbody"),v&&v.c(),this.h()},h:function(){l.border="1",f(l,"cellspacing","0"),f(l,"cellpadding","3"),d(l,"max-width","250px")},m:function(t,e){r(u,t,e),n(l,u),n(h,l),n(m,l),n(p,l),v&&v.m(p,null)},p:function(t,e){e.shelves.results?v?v.p(t,e):((v=N(i,e)).c(),v.m(p,null)):v&&(v.u(),v.d(),v=null)},u:function(){o(u),v&&v.u()},d:function(){v&&v.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function H(t){f(t,"svelte-2892906231","")}function R(t,e){var i,a,u,l,h,f,m,p,v,_,g,b,y,w,x,P,O,A,E,M,L,C,S,N,j,R=e.res,T=(e.res_index,R.last_at.ago||R.last_at.iso8601),q=R.item_id,U=e.Array.isArray(R.meta.callnumber)?R.meta.callnumber.join(" "):R.meta.callnumber,I=R.meta.author,$=R.meta.title,B=new k({root:t.root,data:{loc:R.tags[0].temporary.loc}});return{c:function(){i=s("tr"),a=s("td"),u=s("abbr"),l=c(T),f=c("\n            "),m=s("td"),B._fragment.c(),p=c("\n            "),v=s("td"),_=s("a"),g=c(q),y=c("\n            "),w=s("td"),x=c(U),P=c("\n            "),O=s("td"),A=s("abbr"),E=c(I),L=c("\n            "),C=s("td"),S=s("abbr"),N=c($),this.h()},h:function(){H(a),H(u),u.title=h=R.last_at.iso8601,H(m),H(v),H(_),_.href=b="/#/item/"+R.item_id,H(w),H(O),H(A),A.title=M=R.meta.author,d(O,"max-width","200px"),H(C),H(S),S.title=j=R.meta.title,d(C,"max-width","200px")},m:function(t,e){r(i,t,e),n(a,i),n(u,a),n(l,u),n(f,i),n(m,i),B._mount(m,null),n(p,i),n(v,i),n(_,v),n(g,_),n(y,i),n(w,i),n(x,w),n(P,i),n(O,i),n(A,O),n(E,A),n(L,i),n(C,i),n(S,C),n(N,S)},p:function(t,e){R=e.res,e.res_index,t.shelf&&T!==(T=R.last_at.ago||R.last_at.iso8601)&&(l.data=T),t.shelf&&h!==(h=R.last_at.iso8601)&&(u.title=h);var n={};t.shelf&&(n.loc=R.tags[0].temporary.loc),B._set(n),t.shelf&&q!==(q=R.item_id)&&(g.data=q),t.shelf&&b!==(b="/#/item/"+R.item_id)&&(_.href=b),(t.Array||t.shelf)&&U!==(U=e.Array.isArray(R.meta.callnumber)?R.meta.callnumber.join(" "):R.meta.callnumber)&&(x.data=U),t.shelf&&I!==(I=R.meta.author)&&(E.data=I),t.shelf&&M!==(M=R.meta.author)&&(A.title=M),t.shelf&&$!==($=R.meta.title)&&(N.data=$),t.shelf&&j!==(j=R.meta.title)&&(S.title=j)},u:function(){o(i)},d:function(){B.destroy(!1)}}}function T(t,n){for(var a,s=n.shelf.results,c=[],l=0;l<s.length;l+=1)c[l]=R(t,e({},n,{res:s[l],res_index:l}));return{c:function(){for(var t=0;t<c.length;t+=1)c[t].c();a=u()},m:function(t,e){for(var n=0;n<c.length;n+=1)c[n].m(t,e);r(a,t,e)},p:function(n,r){var o=r.shelf.results;if(n.shelf||n.Array){for(var i=0;i<o.length;i+=1){var s=e({},r,{res:o[i],res_index:i});c[i]?c[i].p(n,s):(c[i]=R(t,s),c[i].c(),c[i].m(a.parentNode,a))}for(;i<c.length;i+=1)c[i].u(),c[i].d();c.length=o.length}},u:function(){for(var t=0;t<c.length;t+=1)c[t].u();o(a)},d:function(){i(c)}}}function q(t){_(this,t),this._state=e({Array:Array},t.data);var i,a,u,l,h,d,m,p,v=function(){}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(i=this,a=this._state,p=a.shelf.results&&T(i,a),{c:function(){u=s("div"),l=s("table"),(h=s("thead")).innerHTML='<tr><th svelte-2892906231>at</th><th svelte-2892906231>location</th><th svelte-2892906231>barcode</th><th svelte-2892906231>callnum</th><th svelte-2892906231 width="15%">author</th><th svelte-2892906231>title</th><th svelte-2892906231>last</th></tr>',d=c("\n    "),m=s("tbody"),p&&p.c(),this.h()},h:function(){l.border="1",f(l,"cellspacing","0"),f(l,"cellpadding","3")},m:function(t,e){r(u,t,e),n(l,u),n(h,l),n(d,l),n(m,l),p&&p.m(m,null)},p:function(t,e){e.shelf.results?p?p.p(t,e):((p=T(i,e)).c(),p.m(m,null)):p&&(p.u(),p.d(),p=null)},u:function(){o(u),p&&p.u()},d:function(){p&&p.d()}}),this.root._oncreate.push(v),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function U(t){f(t,"svelte-422554819","")}function I(t,e){var n,i,a,u,l=e.path.shelfId,h=new q({root:t.root,data:{shelf:e.shelf,locationMap:e.locationMap}});return{c:function(){n=c("Shelf: "),i=c(l),a=c("\n    "),u=s("div"),h._fragment.c(),this.h()},h:function(){U(u),u.className="shelf-content"},m:function(t,e){r(n,t,e),r(i,t,e),r(a,t,e),r(u,t,e),h._mount(u,null)},p:function(t,e){t.path&&l!==(l=e.path.shelfId)&&(i.data=l);var n={};t.shelf&&(n.shelf=e.shelf),t.locationMap&&(n.locationMap=e.locationMap),h._set(n)},u:function(){o(n),o(i),o(a),o(u)},d:function(){h.destroy(!1)}}}function $(t){_(this,t),this._state=e({shelves:{},shelf:{},locationMap:null},t.data);var i,a,u,l,h,f,d,m=function(){const t="http://spore.deichman.no/api";fetch(`${t}/shelves`).then(t=>t.json()).then(t=>new Promise(e=>{let n=new Map;for(const e of t.results){let t=new Set,r=e.loc.split(".");for(let e=0;e<r.length;e++)t.add({link:`${r.slice(0,e+1).join(".")}`,name:r[e]});n.set(e.loc,t)}e(this.set({locationMap:n,shelves:t}))})).then(()=>{const e=this.get("path");return e.shelfId?Promise.resolve(fetch(`${t}/shelf/${e.shelfId}`)):Promise.reject("No shelf id")}).then(t=>t.json()).then(t=>this.set({shelf:t})).catch(t=>{throw console.log(`something broke: ${t}`),t})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(i=this,a=this._state,f=new j({root:i.root,data:{shelves:a.shelves,locationMap:a.locationMap}}),d=a.path.shelfId&&I(i,a),{c:function(){u=s("div"),l=s("div"),f._fragment.c(),h=c("\n  "),d&&d.c(),this.h()},h:function(){U(u),U(l),l.className="shelf-list",u.className="container"},m:function(t,e){r(u,t,e),n(l,u),f._mount(l,null),n(h,u),d&&d.m(u,null)},p:function(t,e){var n={};t.shelves&&(n.shelves=e.shelves),t.locationMap&&(n.locationMap=e.locationMap),f._set(n),e.path.shelfId?d?d.p(t,e):((d=I(i,e)).c(),d.m(u,null)):d&&(d.u(),d.d(),d=null)},u:function(){o(u),d&&d.u()},d:function(){f.destroy(!1),d&&d.d()}}),this.root._oncreate.push(m),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function B(t){f(t,"svelte-3891022760","")}function D(e,i){var a,u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O,A,E,M,k,L,C,S,N,j,H,R,T,q,U,I,$,D,W=i.item.response.meta.title,z=i.item.response.meta.author,F=i.item.response.meta.callnumber,G=i.item.item_id,Z=i.item.response.meta.biblionumber;return{c:function(){a=s("tr"),u=s("td"),l=s("img"),f=c("\n      "),d=s("tr"),m=s("th"),p=c(W),v=c("\n      "),_=s("tr"),(g=s("td")).textContent="author",b=s("td"),y=c(z),w=c("\n      "),x=s("tr"),(P=s("td")).textContent="cn",O=s("td"),A=c(F),E=c("\n      "),M=s("tr"),(k=s("td")).textContent="barcode",L=s("td"),C=s("a"),S=c(G),j=c("\n      "),H=s("tr"),(R=s("td")).textContent="bibnum",T=s("td"),q=c(Z),U=c(" ["),(I=s("a")).textContent="Koha",D=c("]"),this.h()},h:function(){B(a),B(u),l.src=h="https://img.deichman.no/biblionumber/"+i.item.response.meta.biblionumber,l.alt="item image/cover",u.colSpan="2",B(d),B(m),m.colSpan="2",B(_),B(g),B(b),B(x),B(P),B(O),B(M),B(k),B(L),C.href=N="/#/item/"+i.item.item_id,B(H),B(R),B(T),I.href=$="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+i.item.response.meta.biblionumber},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(f,a),r(d,t,e),n(m,d),n(p,m),r(v,t,e),r(_,t,e),n(g,_),n(b,_),n(y,b),r(w,t,e),r(x,t,e),n(P,x),n(O,x),n(A,O),r(E,t,e),r(M,t,e),n(k,M),n(L,M),n(C,L),n(S,C),r(j,t,e),r(H,t,e),n(R,H),n(T,H),n(q,T),n(U,T),n(I,T),n(D,T)},p:function(t,e){t.item&&h!==(h="https://img.deichman.no/biblionumber/"+e.item.response.meta.biblionumber)&&(l.src=h),t.item&&W!==(W=e.item.response.meta.title)&&(p.data=W),t.item&&z!==(z=e.item.response.meta.author)&&(y.data=z),t.item&&F!==(F=e.item.response.meta.callnumber)&&(A.data=F),t.item&&G!==(G=e.item.item_id)&&(S.data=G),t.item&&N!==(N="/#/item/"+e.item.item_id)&&(C.href=N),t.item&&Z!==(Z=e.item.response.meta.biblionumber)&&(q.data=Z),t.item&&$!==($="https://intra.deichman.no/cgi-bin/koha/catalogue/detail.pl?biblionumber="+e.item.response.meta.biblionumber)&&(I.href=$)},u:function(){o(a),o(d),o(v),o(_),o(w),o(x),o(E),o(M),o(j),o(H)},d:t}}function W(t,e){var i,a,l,h,f,d,m,p,v,_=e.tag,g=(e.tag_index,_.rfid),b=_.permanent.at&&z(t,e),y=_.temporary.at&&F(t,e);return{c:function(){(i=s("tr")).innerHTML='<th svelte-3891022760 colspan="2">tag</th>',a=c("\n        "),l=s("tr"),(h=s("td")).textContent="rfid",f=s("td"),d=c(g),m=c("\n        "),b&&b.c(),p=c("\n        "),y&&y.c(),v=u(),this.h()},h:function(){B(i),B(l),B(h),B(f)},m:function(t,e){r(i,t,e),r(a,t,e),r(l,t,e),n(h,l),n(f,l),n(d,f),r(m,t,e),b&&b.m(t,e),r(p,t,e),y&&y.m(t,e),r(v,t,e)},p:function(e,n){_=n.tag,n.tag_index,e.item&&g!==(g=_.rfid)&&(d.data=g),_.permanent.at?b?b.p(e,n):((b=z(t,n)).c(),b.m(p.parentNode,p)):b&&(b.u(),b.d(),b=null),_.temporary.at?y?y.p(e,n):((y=F(t,n)).c(),y.m(v.parentNode,v)):y&&(y.u(),y.d(),y=null)},u:function(){o(i),o(a),o(l),o(m),b&&b.u(),o(p),y&&y.u(),o(v)},d:function(){b&&b.d(),y&&y.d()}}}function z(t,e){var i,a,u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O=e.tag,A=(e.tag_index,O.permanent.at.ago||O.permanent.at.iso8601),E=O.permanent.dev,M=new k({root:t.root,data:{loc:O.permanent.loc}});return{c:function(){i=s("tr"),(a=s("td")).textContent="perm",u=s("td"),M._fragment.c(),l=c("\n            "),h=s("tr"),(f=s("td")).textContent="at",d=s("td"),m=s("abbr"),p=c(A),_=c("\n            "),g=s("tr"),(b=s("td")).textContent="dev",y=s("td"),w=s("a"),x=c(E),this.h()},h:function(){B(i),B(a),B(u),B(h),B(f),B(d),m.title=v=O.permanent.at.iso8601,B(g),B(b),B(y),w.href=P="/#/dev/"+O.permanent.dev},m:function(t,e){r(i,t,e),n(a,i),n(u,i),M._mount(u,null),r(l,t,e),r(h,t,e),n(f,h),n(d,h),n(m,d),n(p,m),r(_,t,e),r(g,t,e),n(b,g),n(y,g),n(w,y),n(x,w)},p:function(t,e){O=e.tag,e.tag_index;var n={};t.item&&(n.loc=O.permanent.loc),M._set(n),t.item&&A!==(A=O.permanent.at.ago||O.permanent.at.iso8601)&&(p.data=A),t.item&&v!==(v=O.permanent.at.iso8601)&&(m.title=v),t.item&&E!==(E=O.permanent.dev)&&(x.data=E),t.item&&P!==(P="/#/dev/"+O.permanent.dev)&&(w.href=P)},u:function(){o(i),o(l),o(h),o(_),o(g)},d:function(){M.destroy(!1)}}}function F(t,e){var i,a,u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O=e.tag,A=(e.tag_index,O.temporary.at.ago||O.temporary.at.iso8601),E=O.temporary.dev,M=new k({root:t.root,data:{loc:O.temporary.loc}});return{c:function(){i=s("tr"),(a=s("td")).textContent="temp",u=s("td"),M._fragment.c(),l=c("\n            "),h=s("tr"),(f=s("td")).textContent="at",d=s("td"),m=s("abbr"),p=c(A),_=c("\n            "),g=s("tr"),(b=s("td")).textContent="dev",y=s("td"),w=s("a"),x=c(E),this.h()},h:function(){B(i),B(a),B(u),B(h),B(f),B(d),m.title=v=O.temporary.at.iso8601,B(g),B(b),B(y),w.href=P="/#/dev/"+O.temporary.dev},m:function(t,e){r(i,t,e),n(a,i),n(u,i),M._mount(u,null),r(l,t,e),r(h,t,e),n(f,h),n(d,h),n(m,d),n(p,m),r(_,t,e),r(g,t,e),n(b,g),n(y,g),n(w,y),n(x,w)},p:function(t,e){O=e.tag,e.tag_index;var n={};t.item&&(n.loc=O.temporary.loc),M._set(n),t.item&&A!==(A=O.temporary.at.ago||O.temporary.at.iso8601)&&(p.data=A),t.item&&v!==(v=O.temporary.at.iso8601)&&(m.title=v),t.item&&E!==(E=O.temporary.dev)&&(x.data=E),t.item&&P!==(P="/#/dev/"+O.temporary.dev)&&(w.href=P)},u:function(){o(i),o(l),o(h),o(_),o(g)},d:function(){M.destroy(!1)}}}function G(t,a){for(var u,l,h=a.item.response&&a.item.response.meta&&D(0,a),m=a.item.response.tags,p=[],v=0;v<m.length;v+=1)p[v]=W(t,e({},a,{tag:m[v],tag_index:v}));return{c:function(){u=s("table"),h&&h.c(),l=c("\n    \n      ");for(var t=0;t<p.length;t+=1)p[t].c();this.h()},h:function(){u.border="1",f(u,"cellspacing","0"),f(u,"cellpadding","3"),d(u,"max-width","250px")},m:function(t,e){r(u,t,e),h&&h.m(u,null),n(l,u);for(var o=0;o<p.length;o+=1)p[o].m(u,null)},p:function(n,r){r.item.response&&r.item.response.meta?h?h.p(n,r):((h=D(0,r)).c(),h.m(u,l)):h&&(h.u(),h.d(),h=null);var o=r.item.response.tags;if(n.item){for(var i=0;i<o.length;i+=1){var a=e({},r,{tag:o[i],tag_index:i});p[i]?p[i].p(n,a):(p[i]=W(t,a),p[i].c(),p[i].m(u,null))}for(;i<p.length;i+=1)p[i].u(),p[i].d();p.length=o.length}},u:function(){o(u),h&&h.u();for(var t=0;t<p.length;t+=1)p[t].u()},d:function(){h&&h.d(),i(p)}}}function Z(t){var n,i,a,c;_(this,t),this._state=e({},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(n=this,i=this._state,c=i.item&&G(n,i),{c:function(){a=s("div"),c&&c.c()},m:function(t,e){r(a,t,e),c&&c.m(a,null)},p:function(t,e){e.item?c?c.p(t,e):((c=G(n,e)).c(),c.m(a,null)):c&&(c.u(),c.d(),c=null)},u:function(){o(a),c&&c.u()},d:function(){c&&c.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}function K(t){return console.log(t),""}function V(t){f(t,"svelte-2892906231","")}function Y(e,n){var i;return{c:function(){(i=s("tr")).innerHTML='<td svelte-2892906231 colspan="5">...</td>'},m:function(t,e){r(i,t,e)},p:t,u:function(){o(i)},d:t}}function J(e,i){i.answer;var a,u,l,h,f,m,p,v,_,g,b,y,w,x,P,O,A,E,M,k,L=i.res,C=(i.res_index,L.last_seen.ago||L.last_seen.iso8601),S=L.item_id,N=L.meta.author,j=L.meta.title;return{c:function(){a=s("tr"),u=s("td"),l=s("abbr"),h=c(C),m=c("\n                  "),p=s("td"),v=s("a"),_=c(S),b=c("\n                  "),y=s("td"),w=s("abbr"),x=c(N),O=c("\n                  "),A=s("td"),E=s("abbr"),M=c(j),this.h()},h:function(){V(u),V(l),l.title=f=L.last_seen.iso8601,V(p),V(v),v.href=g="/#/item/"+L.item_id,V(y),V(w),w.title=P=L.meta.author,d(y,"max-width","200px"),V(A),V(E),E.title=k=L.meta.title,d(A,"max-width","200px")},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(h,l),n(m,a),n(p,a),n(v,p),n(_,v),n(b,a),n(y,a),n(w,y),n(x,w),n(O,a),n(A,a),n(E,A),n(M,E)},p:function(t,e){e.answer,L=e.res,e.res_index,t.results&&C!==(C=L.last_seen.ago||L.last_seen.iso8601)&&(h.data=C),t.results&&f!==(f=L.last_seen.iso8601)&&(l.title=f),t.results&&S!==(S=L.item_id)&&(_.data=S),t.results&&g!==(g="/#/item/"+L.item_id)&&(v.href=g),t.results&&N!==(N=L.meta.author)&&(x.data=N),t.results&&P!==(P=L.meta.author)&&(w.title=P),t.results&&j!==(j=L.meta.title)&&(M.data=j),t.results&&k!==(k=L.meta.title)&&(E.title=k)},u:function(){o(a)},d:t}}function Q(t,n){for(var a,s=n.answer,c=s.results,l=[],h=0;h<c.length;h+=1)l[h]=J(0,e({},n,{res:c[h],res_index:h}));return{c:function(){for(var t=0;t<l.length;t+=1)l[t].c();a=u()},m:function(t,e){for(var n=0;n<l.length;n+=1)l[n].m(t,e);r(a,t,e)},p:function(t,n){var r=(s=n.answer).results;if(t.results){for(var o=0;o<r.length;o+=1){var i=e({},n,{res:r[o],res_index:o});l[o]?l[o].p(t,i):(l[o]=J(0,i),l[o].c(),l[o].m(a.parentNode,a))}for(;o<l.length;o+=1)l[o].u(),l[o].d();l.length=r.length}},u:function(){for(var t=0;t<l.length;t+=1)l[t].u();o(a)},d:function(){i(l)}}}function X(e,n){var i;n.answer;return{c:function(){(i=s("tr")).innerHTML='<td svelte-2892906231 colspan="5">No Entries</td>'},m:function(t,e){r(i,t,e)},p:function(t,e){e.answer},u:function(){o(i)},d:t}}function tt(t,e){var n,i=e.answer;function a(t){return i.results&&i.results.length?Q:X}var s=a(),c=s(t,e);return{c:function(){c.c(),n=u()},m:function(t,e){c.m(t,e),r(n,t,e)},p:function(e,r){i=r.answer,s===(s=a())&&c?c.p(e,r):(c.u(),c.d(),(c=s(t,r)).c(),c.m(n.parentNode,n))},u:function(){c.u(),o(n)},d:function(){c.d()}}}function et(t,e){var n,i,a,s=e.answer,l=K(s),h=s&&tt(t,e);return{c:function(){n=c(l),i=c("\n        "),h&&h.c(),a=u()},m:function(t,e){r(n,t,e),r(i,t,e),h&&h.m(t,e),r(a,t,e)},p:function(e,r){s=r.answer,e.results&&l!==(l=K(s))&&(n.data=l),s?h?h.p(e,r):((h=tt(t,r)).c(),h.m(a.parentNode,a)):h&&(h.u(),h.d(),h=null)},u:function(){o(n),o(i),h&&h.u(),o(a)},d:function(){h&&h.d()}}}function nt(e,i){var a,u,l,h,f=i.error,d=f;return{c:function(){a=s("tr"),u=s("td"),l=c("error: "),h=c(d),this.h()},h:function(){V(u),u.colSpan="6"},m:function(t,e){r(a,t,e),n(u,a),n(l,u),n(h,u)},p:function(t,e){f=e.error,t.results&&d!==(d=f)&&(h.data=d)},u:function(){o(a)},d:t}}function rt(t){_(this,t),this._state=e({results:[]},t.data);var i=function(){console.log(this),this.observe("query",t=>{console.log("changed: ",t),t&&t.length>=3?this.set({results:fetch(`/api/search?q=${t}`).then(t=>t.json())}):this.set({results:void 0})})}.bind(this);t.root||(this._oncreate=[]),this._fragment=function(t,i){var a,c,u,l,h,d,m,p;function v(e,n,r){if(e===d){var o=l;l=n&&(h=n)(t,r),o&&(o.u(),o.d(),l.c(),l.m(u,null),t.root.set({}))}}function _(n,r){var o,i=d={};if((o=n)&&"function"==typeof o.then){if(n.then(function(n){var r=t.get();v(i,et,e({},r,p={answer:n}))},function(n){var r=t.get();v(i,nt,e({},r,p={error:n}))}),h!==Y)return v(i,Y,r),!0}else if(p={answer:n},h!==et)return v(i,et,e({},r,p)),!0}return _(m=i.results,i),{c:function(){a=s("div"),c=s("table"),u=s("tbody"),l.c(),this.h()},h:function(){c.border="1",f(c,"cellspacing","0"),f(c,"cellpadding","3")},m:function(t,e){r(a,t,e),n(c,a),n(u,c),l.m(u,null)},p:function(t,n){"results"in t&&m!==(m=n.results)&&_(m,n)||l.p(t,e({},n,p))},u:function(){o(a),l.u()},d:function(){d=null,l.d()}}}(this,this._state),this.root._oncreate.push(i),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),g(this._oncreate))}function ot(t){f(t,"svelte-3007816744","")}function it(t,e){var i,a,u,d,m,p,v,_,g,b,y=e.item.response.meta.title,w=!1;function x(){w=!0,t.set({query:v.value}),w=!1}var P=new rt({root:t.root,data:{query:e.query}});return{c:function(){i=s("h1"),a=c(y),u=c("\n      "),d=s("form"),(m=s("label")).textContent="Search:",p=c("\n      "),v=s("input"),_=c("\n      "),P._fragment.c(),g=c("\n      "),b=s("hr"),this.h()},h:function(){m.htmlFor="code",l(v,"input",x),v.id="code",v.name="code",v.className="ui-autocomplete-input",v.autocomplete="off",f(b,"size","1")},m:function(t,o){r(i,t,o),n(a,i),r(u,t,o),r(d,t,o),n(m,d),n(p,d),n(v,d),v.value=e.query,n(_,d),P._mount(d,null),r(g,t,o),r(b,t,o)},p:function(t,e){t.item&&y!==(y=e.item.response.meta.title)&&(a.data=y),w||(v.value=e.query);var n={};t.query&&(n.query=e.query),P._set(n)},u:function(){o(i),o(u),o(d),o(g),o(b)},d:function(){h(v,"input",x),P.destroy(!1)}}}function at(t,a){for(var u,l,h,f,d,m,p,v,_,g,b,y,w,x,P,O=a.it,A=(a.it_index,O.at.ago||O.at.iso8601),E=O.rfid||"N/A",M=new k({root:t.root,data:{loc:O.location}}),L=O.actions,C=[],S=0;S<L.length;S+=1)C[S]=st(t,e({},a,{action:L[S],action_index:S}));return{c:function(){u=s("tr"),l=s("td"),h=s("abbr"),f=c(A),m=c("\n            "),p=s("td"),M._fragment.c(),v=c("\n            "),_=s("td"),g=s("div");for(var t=0;t<C.length;t+=1)C[t].c();b=c("\n            "),y=s("td"),w=s("abbr"),x=c(E),this.h()},h:function(){ot(l),h.title=d=O.at.iso8601,ot(p),ot(_),ot(g),g.className="compact",ot(y),w.title=P=O.dev||"N/A"},m:function(t,e){r(u,t,e),n(l,u),n(h,l),n(f,h),n(m,u),n(p,u),M._mount(p,null),n(v,u),n(_,u),n(g,_);for(var o=0;o<C.length;o+=1)C[o].m(g,null);n(b,u),n(y,u),n(w,y),n(x,w)},p:function(n,r){O=r.it,r.it_index,n.item&&A!==(A=O.at.ago||O.at.iso8601)&&(f.data=A),n.item&&d!==(d=O.at.iso8601)&&(h.title=d);var o={};n.item&&(o.loc=O.location),M._set(o);var i=O.actions;if(n.item){for(var a=0;a<i.length;a+=1){var s=e({},r,{action:i[a],action_index:a});C[a]?C[a].p(n,s):(C[a]=st(t,s),C[a].c(),C[a].m(g,null))}for(;a<C.length;a+=1)C[a].u(),C[a].d();C.length=i.length}n.item&&E!==(E=O.rfid||"N/A")&&(x.data=E),n.item&&P!==(P=O.dev||"N/A")&&(w.title=P)},u:function(){o(u);for(var t=0;t<C.length;t+=1)C[t].u()},d:function(){M.destroy(!1),i(C)}}}function st(e,i){i.it;var a,u,l=i.action,h=(i.it_index,i.action_index,l);return{c:function(){a=s("div"),u=c(h)},m:function(t,e){r(a,t,e),n(u,a)},p:function(t,e){e.it,l=e.action,e.it_index,e.action_index,t.item&&h!==(h=l)&&(u.data=h)},u:function(){o(a)},d:t}}function ct(t,a){for(var u,l,h,m,p,v=a.item.response.meta&&it(t,a),_=a.item.response.history,g=[],b=0;b<_.length;b+=1)g[b]=at(t,e({},a,{it:_[b],it_index:b}));return{c:function(){v&&v.c(),u=c("\n    "),l=s("table"),(h=s("thead")).innerHTML="<tr><th svelte-3007816744>at</th><th svelte-3007816744>shelf</th><th svelte-3007816744>action</th><th svelte-3007816744>rfid</th></tr>",m=c("\n      "),p=s("tbody");for(var t=0;t<g.length;t+=1)g[t].c();this.h()},h:function(){l.border="1",f(l,"cellspacing","0"),f(l,"cellpadding","3"),d(l,"max-width","250px")},m:function(t,e){v&&v.m(t,e),r(u,t,e),r(l,t,e),n(h,l),n(m,l),n(p,l);for(var o=0;o<g.length;o+=1)g[o].m(p,null)},p:function(n,r){r.item.response.meta?v?v.p(n,r):((v=it(t,r)).c(),v.m(u.parentNode,u)):v&&(v.u(),v.d(),v=null);var o=r.item.response.history;if(n.item){for(var i=0;i<o.length;i+=1){var a=e({},r,{it:o[i],it_index:i});g[i]?g[i].p(n,a):(g[i]=at(t,a),g[i].c(),g[i].m(p,null))}for(;i<g.length;i+=1)g[i].u(),g[i].d();g.length=o.length}},u:function(){v&&v.u(),o(u),o(l);for(var t=0;t<g.length;t+=1)g[t].u()},d:function(){v&&v.d(),i(g)}}}function ut(t){var n,i,a,c;_(this,t),this._state=e({query:""},t.data),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(n=this,i=this._state,c=i.item&&i.item.response&&ct(n,i),{c:function(){a=s("div"),c&&c.c()},m:function(t,e){r(a,t,e),c&&c.m(a,null)},p:function(t,e){e.item&&e.item.response?c?c.p(t,e):((c=ct(n,e)).c(),c.m(a,null)):c&&(c.u(),c.d(),c=null)},u:function(){o(a),c&&c.u()},d:function(){c&&c.d()}}),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}e(k.prototype,b),e(j.prototype,b),e(q.prototype,b),e($.prototype,b),e(Z.prototype,b),e(rt.prototype,b),e(ut.prototype,b);const{createRouter:lt}=P;var ht={goHome(){lt.replace("/")}};function ft(t){f(t,"svelte-993550016","")}function dt(t){_(this,t),this._state=e({item:null,locationMap:null},t.data);var i,a,u,l,h,f,d,m,p=function(){const t="http://spore.deichman.no/api";fetch(`${t}/shelves`).then(t=>t.json()).then(t=>new Promise(e=>{let n=new Map;for(const e of t.results){let t=new Set,r=e.loc.split(".");for(let e=0;e<r.length;e++)t.add({link:`${r.slice(0,e+1).join(".")}`,name:r[e]});n.set(e.loc,t)}e(this.set({locationMap:n}))})).then(()=>{const e=this.get("path");return e.barcode?Promise.resolve(fetch(`${t}/item/NO:02030000/${e.barcode}`)):Promise.reject("No shelf id")}).then(t=>t.json()).then(t=>(console.log(t),this.set({item:t}))).catch(t=>{throw console.log(`something broke: ${t}`),t})}.bind(this);t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(i=this,a=this._state,d=new Z({root:i.root,data:{item:a.item,locationMap:a.locationMap}}),m=new ut({root:i.root,data:{barcode:a.path.barcode,item:a.item,locationMap:a.locationMap}}),{c:function(){u=s("div"),l=s("div"),d._fragment.c(),h=c("\n  "),f=s("div"),m._fragment.c(),this.h()},h:function(){ft(u),ft(l),l.className="item-info",ft(f),f.className="history",u.className="container"},m:function(t,e){r(u,t,e),n(l,u),d._mount(l,null),n(h,u),n(f,u),m._mount(f,null)},p:function(t,e){var n={};t.item&&(n.item=e.item),t.locationMap&&(n.locationMap=e.locationMap),d._set(n);var r={};t.path&&(r.barcode=e.path.barcode),t.item&&(r.item=e.item),t.locationMap&&(r.locationMap=e.locationMap),m._set(r)},u:function(){o(u)},d:function(){d.destroy(!1),m.destroy(!1)}}),this.root._oncreate.push(p),t.target&&(this._fragment.c(),this._fragment.m(t.target,t.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}e(dt.prototype,ht,b);const{createRouter:mt}=P;var pt={goHome(){mt.replace("/")}};function vt(n){_(this,n),this._state=e({},n.data),this._fragment=function(e,n){var i,a,u;function f(t){e.goHome()}return{c:function(){(i=s("h1")).textContent="404 Not Found",a=c("\n"),(u=s("button")).textContent="Go Home",this.h()},h:function(){l(u,"click",f)},m:function(t,e){r(i,t,e),r(a,t,e),r(u,t,e)},p:t,u:function(){o(i),o(a),o(u)},d:function(){h(u,"click",f)}}}(this,this._state),n.target&&(this._fragment.c(),this._fragment.m(n.target,n.anchor||null))}e(vt.prototype,pt,b);const{createRouter:_t,RouterLink:gt}=P,bt=_t({"/":$,"/shelf":$,"/shelf/:shelfId":$,"/item/:barcode":{Component:dt,props:{data:{salutation:"Hello"}}}},{pathRegex:"[a-zA-Z0-9.]+",defaultRoute:vt});function yt(){bt.destroy()}function wt(i){_(this,i),this._state=e({},i.data),this._handlers.destroy=[yt];var u,l,h,f,d,m,p=function(){bt.create("#app")}.bind(this);i.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=(u=this,this._state,m=new gt({root:u.root,slots:{default:a()},data:{to:"/shelf"}}),{c:function(){l=s("div"),h=c("Shelf"),m._fragment.c(),f=c("\n  "),d=s("div"),this.h()},h:function(){d.id="app"},m:function(t,e){r(l,t,e),n(h,m._slotted.default),m._mount(l,null),n(f,l),n(d,l)},p:t,u:function(){o(l)},d:function(){m.destroy(!1)}}),this.root._oncreate.push(p),i.target&&(this._fragment.c(),this._fragment.m(i.target,i.anchor||null),this._lock=!0,g(this._beforecreate),g(this._oncreate),g(this._aftercreate),this._lock=!1)}return _t.listen(()=>{console.log("router changed")}),e(wt.prototype,b),new wt({target:document.body,data:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
